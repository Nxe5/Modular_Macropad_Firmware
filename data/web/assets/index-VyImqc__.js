(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}})();const Hr=!1;var dr=Array.isArray,ea=Array.prototype.indexOf,Br=Array.from,ta=Object.defineProperty,lt=Object.getOwnPropertyDescriptor,dn=Object.getOwnPropertyDescriptors,ra=Object.prototype,na=Array.prototype,Ir=Object.getPrototypeOf;function Vt(e){return typeof e=="function"}const nr=()=>{};function aa(e){return e()}function kr(e){for(var t=0;t<e.length;t++)e[t]()}const Je=2,vn=4,vr=8,qr=16,vt=32,Zt=64,sr=128,Ye=256,or=512,Ie=1024,ft=2048,Nt=4096,ct=8192,fr=16384,sa=32768,Xt=65536,fn=1<<17,oa=1<<19,pn=1<<20,ut=Symbol("$state"),_n=Symbol("legacy props"),ia=Symbol("");function gn(e){return e===this.v}function mn(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Or(e){return!mn(e,this.v)}function la(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function ca(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function ua(e){throw new Error("https://svelte.dev/e/effect_orphan")}function da(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function va(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function fa(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function pa(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function _a(){throw new Error("https://svelte.dev/e/state_unsafe_local_read")}function ga(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let Ft=!1,ma=!1;function ba(){Ft=!0}const Rr=1,Lr=2,bn=4,ha=8,ya=16,xa=1,wa=2,hn=4,ka=8,$a=16,Ea=1,Ca=2,Fe=Symbol(),yn="http://www.w3.org/2000/svg";function Fr(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let me=null;function Yr(e){me=e}function je(e,t=!1,r){me={p:me,c:null,e:null,m:!1,s:e,x:null,l:null},Ft&&!t&&(me.l={s:null,u:null,r1:[],r2:Re(!1)})}function Ve(e){const t=me;if(t!==null){e!==void 0&&(t.x=e);const i=t.e;if(i!==null){var r=ge,a=be;t.e=null;try{for(var n=0;n<i.length;n++){var o=i[n];kt(o.effect),wt(o.reaction),_r(o.fn)}}finally{kt(r),wt(a)}}me=t.p,t.m=!0}return e||{}}function Qt(){return!Ft||me!==null&&me.l===null}function Re(e,t){var r={f:0,v:e,reactions:null,equals:gn,rv:0,wv:0};return r}function $r(e){return xn(Re(e))}function Wr(e,t=!1){var a;const r=Re(e);return t||(r.equals=Or),Ft&&me!==null&&me.l!==null&&((a=me.l).s??(a.s=[])).push(r),r}function ne(e,t=!1){return xn(Wr(e,t))}function xn(e){return be!==null&&!tt&&be.f&Je&&(rt===null?Oa([e]):rt.push(e)),e}function Pe(e,t){return y(e,Xe(()=>s(e))),t}function y(e,t){return be!==null&&!tt&&Qt()&&be.f&(Je|qr)&&(rt===null||!rt.includes(e))&&ga(),Jt(e,t)}function Jt(e,t){return e.equals(t)||(e.v,e.v=t,e.wv=qn(),wn(e,ft),Qt()&&ge!==null&&ge.f&Ie&&!(ge.f&(vt|Zt))&&(ot===null?Ra([e]):ot.push(e))),t}function Jr(e,t=1){var r=s(e),a=t===1?r++:r--;return y(e,r),a}function wn(e,t){var r=e.reactions;if(r!==null)for(var a=Qt(),n=r.length,o=0;o<n;o++){var i=r[o],l=i.f;l&ft||!a&&i===ge||(Qe(i,t),l&(Ie|Ye)&&(l&Je?wn(i,Nt):hr(i)))}}let kn=!1;function it(e,t=null,r){if(typeof e!="object"||e===null||ut in e)return e;const a=Ir(e);if(a!==ra&&a!==na)return e;var n=new Map,o=dr(e),i=Re(0);o&&n.set("length",Re(e.length));var l;return new Proxy(e,{defineProperty(u,c,_){(!("value"in _)||_.configurable===!1||_.enumerable===!1||_.writable===!1)&&fa();var v=n.get(c);return v===void 0?(v=Re(_.value),n.set(c,v)):y(v,it(_.value,l)),!0},deleteProperty(u,c){var _=n.get(c);if(_===void 0)c in u&&n.set(c,Re(Fe));else{if(o&&typeof c=="string"){var v=n.get("length"),p=Number(c);Number.isInteger(p)&&p<v.v&&y(v,p)}y(_,Fe),Gr(i)}return!0},get(u,c,_){var x;if(c===ut)return e;var v=n.get(c),p=c in u;if(v===void 0&&(!p||(x=lt(u,c))!=null&&x.writable)&&(v=Re(it(p?u[c]:Fe,l)),n.set(c,v)),v!==void 0){var k=s(v);return k===Fe?void 0:k}return Reflect.get(u,c,_)},getOwnPropertyDescriptor(u,c){var _=Reflect.getOwnPropertyDescriptor(u,c);if(_&&"value"in _){var v=n.get(c);v&&(_.value=s(v))}else if(_===void 0){var p=n.get(c),k=p==null?void 0:p.v;if(p!==void 0&&k!==Fe)return{enumerable:!0,configurable:!0,value:k,writable:!0}}return _},has(u,c){var k;if(c===ut)return!0;var _=n.get(c),v=_!==void 0&&_.v!==Fe||Reflect.has(u,c);if(_!==void 0||ge!==null&&(!v||(k=lt(u,c))!=null&&k.writable)){_===void 0&&(_=Re(v?it(u[c],l):Fe),n.set(c,_));var p=s(_);if(p===Fe)return!1}return v},set(u,c,_,v){var m;var p=n.get(c),k=c in u;if(o&&c==="length")for(var x=_;x<p.v;x+=1){var P=n.get(x+"");P!==void 0?y(P,Fe):x in u&&(P=Re(Fe),n.set(x+"",P))}p===void 0?(!k||(m=lt(u,c))!=null&&m.writable)&&(p=Re(void 0),y(p,it(_,l)),n.set(c,p)):(k=p.v!==Fe,y(p,it(_,l)));var B=Reflect.getOwnPropertyDescriptor(u,c);if(B!=null&&B.set&&B.set.call(v,_),!k){if(o&&typeof c=="string"){var D=n.get("length"),C=Number(c);Number.isInteger(C)&&C>=D.v&&y(D,C+1)}Gr(i)}return!0},ownKeys(u){s(i);var c=Reflect.ownKeys(u).filter(p=>{var k=n.get(p);return k===void 0||k.v!==Fe});for(var[_,v]of n)v.v!==Fe&&!(_ in u)&&c.push(_);return c},setPrototypeOf(){pa()}})}function Gr(e,t=1){y(e,e.v+t)}function Zr(e){return e!==null&&typeof e=="object"&&ut in e?e[ut]:e}function Sa(e,t){return Object.is(Zr(e),Zr(t))}var Xr,$n,En,Cn;function Ma(){if(Xr===void 0){Xr=window,$n=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype;En=lt(t,"firstChild").get,Cn=lt(t,"nextSibling").get,e.__click=void 0,e.__className="",e.__attributes=null,e.__styles=null,e.__e=void 0,Text.prototype.__t=void 0}}function er(e=""){return document.createTextNode(e)}function qt(e){return En.call(e)}function pr(e){return Cn.call(e)}function f(e,t){return qt(e)}function q(e,t){{var r=qt(e);return r instanceof Comment&&r.data===""?pr(r):r}}function g(e,t=1,r=!1){let a=e;for(;t--;)a=pr(a);return a}function Aa(e){e.textContent=""}function Ot(e){var t=Je|ft,r=be!==null&&be.f&Je?be:null;return ge===null||r!==null&&r.f&Ye?t|=Ye:ge.f|=pn,{ctx:me,deps:null,effects:null,equals:gn,f:t,fn:e,reactions:null,rv:0,v:null,wv:0,parent:r??ge}}function Ce(e){const t=Ot(e);return t.equals=Or,t}function Sn(e){var t=e.effects;if(t!==null){e.effects=null;for(var r=0;r<t.length;r+=1)dt(t[r])}}function Na(e){for(var t=e.parent;t!==null;){if(!(t.f&Je))return t;t=t.parent}return null}function za(e){var t,r=ge;kt(Na(e));try{Sn(e),t=Rn(e)}finally{kt(r)}return t}function Mn(e){var t=za(e),r=(xt||e.f&Ye)&&e.deps!==null?Nt:Ie;Qe(e,r),e.equals(t)||(e.v=t,e.wv=qn())}function An(e){ge===null&&be===null&&ua(),be!==null&&be.f&Ye&&ge===null&&ca(),Ur&&la()}function Pa(e,t){var r=t.last;r===null?t.last=t.first=e:(r.next=e,e.prev=r,t.last=e)}function Wt(e,t,r,a=!0){var n=(e&Zt)!==0,o=ge,i={ctx:me,deps:null,nodes_start:null,nodes_end:null,f:e|ft,first:null,fn:t,last:null,next:null,parent:n?null:o,prev:null,teardown:null,transitions:null,wv:0};if(r){var l=It;try{en(!0),br(i),i.f|=sa}catch(_){throw dt(i),_}finally{en(l)}}else t!==null&&hr(i);var u=r&&i.deps===null&&i.first===null&&i.nodes_start===null&&i.teardown===null&&(i.f&(pn|sr))===0;if(!u&&!n&&a&&(o!==null&&Pa(i,o),be!==null&&be.f&Je)){var c=be;(c.effects??(c.effects=[])).push(i)}return i}function Nn(e){const t=Wt(vr,null,!1);return Qe(t,Ie),t.teardown=e,t}function Er(e){An();var t=ge!==null&&(ge.f&vt)!==0&&me!==null&&!me.m;if(t){var r=me;(r.e??(r.e=[])).push({fn:e,effect:ge,reaction:be})}else{var a=_r(e);return a}}function Ta(e){return An(),gr(e)}function Da(e){const t=Wt(Zt,e,!0);return(r={})=>new Promise(a=>{r.outro?Rt(t,()=>{dt(t),a(void 0)}):(dt(t),a(void 0))})}function _r(e){return Wt(vn,e,!1)}function Qr(e,t){var r=me,a={effect:null,ran:!1};r.l.r1.push(a),a.effect=gr(()=>{e(),!a.ran&&(a.ran=!0,y(r.l.r2,!0),Xe(t))})}function Ba(){var e=me;gr(()=>{if(s(e.l.r2)){for(var t of e.l.r1){var r=t.effect;r.f&Ie&&Qe(r,Nt),jt(r)&&br(r),t.ran=!1}e.l.r2.v=!1}})}function gr(e){return Wt(vr,e,!0)}function K(e,t=[],r=Ot){const a=t.map(r);return tr(()=>e(...a.map(s)))}function tr(e,t=0){return Wt(vr|qr|t,e,!0)}function At(e,t=!0){return Wt(vr|vt,e,!0,t)}function zn(e){var t=e.teardown;if(t!==null){const r=Ur,a=be;tn(!0),wt(null);try{t.call(null)}finally{tn(r),wt(a)}}}function Pn(e,t=!1){var r=e.first;for(e.first=e.last=null;r!==null;){var a=r.next;dt(r,t),r=a}}function Ia(e){for(var t=e.first;t!==null;){var r=t.next;t.f&vt||dt(t),t=r}}function dt(e,t=!0){var r=!1;if((t||e.f&oa)&&e.nodes_start!==null){for(var a=e.nodes_start,n=e.nodes_end;a!==null;){var o=a===n?null:pr(a);a.remove(),a=o}r=!0}Pn(e,t&&!r),ur(e,0),Qe(e,fr);var i=e.transitions;if(i!==null)for(const u of i)u.stop();zn(e);var l=e.parent;l!==null&&l.first!==null&&Tn(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=null}function Tn(e){var t=e.parent,r=e.prev,a=e.next;r!==null&&(r.next=a),a!==null&&(a.prev=r),t!==null&&(t.first===e&&(t.first=a),t.last===e&&(t.last=r))}function Rt(e,t){var r=[];jr(e,r,!0),Dn(r,()=>{dt(e),t&&t()})}function Dn(e,t){var r=e.length;if(r>0){var a=()=>--r||t();for(var n of e)n.out(a)}else t()}function jr(e,t,r){if(!(e.f&ct)){if(e.f^=ct,e.transitions!==null)for(const i of e.transitions)(i.is_global||r)&&t.push(i);for(var a=e.first;a!==null;){var n=a.next,o=(a.f&Xt)!==0||(a.f&vt)!==0;jr(a,t,o?r:!1),a=n}}}function Gt(e){Bn(e,!0)}function Bn(e,t){if(e.f&ct){e.f^=ct,e.f&Ie||(e.f^=Ie),jt(e)&&(Qe(e,ft),hr(e));for(var r=e.first;r!==null;){var a=r.next,n=(r.f&Xt)!==0||(r.f&vt)!==0;Bn(r,n?t:!1),r=a}if(e.transitions!==null)for(const o of e.transitions)(o.is_global||t)&&o.in()}}let Cr=!1,Sr=[];function qa(){Cr=!1;const e=Sr.slice();Sr=[],kr(e)}function Vr(e){Cr||(Cr=!0,queueMicrotask(qa)),Sr.push(e)}let ar=!1,ir=!1,lr=null,It=!1,Ur=!1;function en(e){It=e}function tn(e){Ur=e}let Mr=[],Kt=0;let be=null,tt=!1;function wt(e){be=e}let ge=null;function kt(e){ge=e}let rt=null;function Oa(e){rt=e}let Le=null,We=0,ot=null;function Ra(e){ot=e}let In=1,cr=0,xt=!1,bt=null;function qn(){return++In}function jt(e){var v;var t=e.f;if(t&ft)return!0;if(t&Nt){var r=e.deps,a=(t&Ye)!==0;if(r!==null){var n,o,i=(t&or)!==0,l=a&&ge!==null&&!xt,u=r.length;if(i||l){var c=e,_=c.parent;for(n=0;n<u;n++)o=r[n],(i||!((v=o==null?void 0:o.reactions)!=null&&v.includes(c)))&&(o.reactions??(o.reactions=[])).push(c);i&&(c.f^=or),l&&_!==null&&!(_.f&Ye)&&(c.f^=Ye)}for(n=0;n<u;n++)if(o=r[n],jt(o)&&Mn(o),o.wv>e.wv)return!0}(!a||ge!==null&&!xt)&&Qe(e,Ie)}return!1}function La(e,t){for(var r=t;r!==null;){if(r.f&sr)try{r.fn(e);return}catch{r.f^=sr}r=r.parent}throw ar=!1,e}function Fa(e){return(e.f&fr)===0&&(e.parent===null||(e.parent.f&sr)===0)}function mr(e,t,r,a){if(ar){if(r===null&&(ar=!1),Fa(t))throw e;return}r!==null&&(ar=!0);{La(e,t);return}}function On(e,t,r=!0){var a=e.reactions;if(a!==null)for(var n=0;n<a.length;n++){var o=a[n];o.f&Je?On(o,t,!1):t===o&&(r?Qe(o,ft):o.f&Ie&&Qe(o,Nt),hr(o))}}function Rn(e){var k;var t=Le,r=We,a=ot,n=be,o=xt,i=rt,l=me,u=tt,c=e.f;Le=null,We=0,ot=null,be=c&(vt|Zt)?null:e,xt=(c&Ye)!==0&&(!It||n===null||u),rt=null,Yr(e.ctx),tt=!1,cr++;try{var _=(0,e.fn)(),v=e.deps;if(Le!==null){var p;if(ur(e,We),v!==null&&We>0)for(v.length=We+Le.length,p=0;p<Le.length;p++)v[We+p]=Le[p];else e.deps=v=Le;if(!xt)for(p=We;p<v.length;p++)((k=v[p]).reactions??(k.reactions=[])).push(e)}else v!==null&&We<v.length&&(ur(e,We),v.length=We);if(Qt()&&ot!==null&&!tt&&v!==null&&!(e.f&(Je|Nt|ft)))for(p=0;p<ot.length;p++)On(ot[p],e);return n!==null&&cr++,_}finally{Le=t,We=r,ot=a,be=n,xt=o,rt=i,Yr(l),tt=u}}function Wa(e,t){let r=t.reactions;if(r!==null){var a=ea.call(r,e);if(a!==-1){var n=r.length-1;n===0?r=t.reactions=null:(r[a]=r[n],r.pop())}}r===null&&t.f&Je&&(Le===null||!Le.includes(t))&&(Qe(t,Nt),t.f&(Ye|or)||(t.f^=or),Sn(t),ur(t,0))}function ur(e,t){var r=e.deps;if(r!==null)for(var a=t;a<r.length;a++)Wa(e,r[a])}function br(e){var t=e.f;if(!(t&fr)){Qe(e,Ie);var r=ge,a=me;ge=e;try{t&qr?Ia(e):Pn(e),zn(e);var n=Rn(e);e.teardown=typeof n=="function"?n:null,e.wv=In;var o=e.deps,i;Hr&&ma&&e.f&ft}catch(l){mr(l,e,r,a||e.ctx)}finally{ge=r}}}function ja(){if(Kt>1e3){Kt=0;try{da()}catch(e){if(lr!==null)mr(e,lr,null);else throw e}}Kt++}function Va(e){var t=e.length;if(t!==0){ja();var r=It;It=!0;try{for(var a=0;a<t;a++){var n=e[a];n.f&Ie||(n.f^=Ie);var o=Ha(n);Ua(o)}}finally{It=r}}}function Ua(e){var t=e.length;if(t!==0)for(var r=0;r<t;r++){var a=e[r];if(!(a.f&(fr|ct)))try{jt(a)&&(br(a),a.deps===null&&a.first===null&&a.nodes_start===null&&(a.teardown===null?Tn(a):a.fn=null))}catch(n){mr(n,a,null,a.ctx)}}}function Ka(){if(ir=!1,Kt>1001)return;const e=Mr;Mr=[],Va(e),ir||(Kt=0,lr=null)}function hr(e){ir||(ir=!0,queueMicrotask(Ka)),lr=e;for(var t=e;t.parent!==null;){t=t.parent;var r=t.f;if(r&(Zt|vt)){if(!(r&Ie))return;t.f^=Ie}}Mr.push(t)}function Ha(e){var t=[],r=e.first;e:for(;r!==null;){var a=r.f,n=(a&vt)!==0,o=n&&(a&Ie)!==0,i=r.next;if(!o&&!(a&ct)){if(a&vn)t.push(r);else if(n)r.f^=Ie;else{var l=be;try{be=r,jt(r)&&br(r)}catch(_){mr(_,r,null,r.ctx)}finally{be=l}}var u=r.first;if(u!==null){r=u;continue}}if(i===null){let _=r.parent;for(;_!==null;){if(e===_)break e;var c=_.next;if(c!==null){r=c;continue e}_=_.parent}}r=i}return t}function s(e){var t=e.f,r=(t&Je)!==0;if(bt!==null&&bt.add(e),be!==null&&!tt){rt!==null&&rt.includes(e)&&_a();var a=be.deps;e.rv<cr&&(e.rv=cr,Le===null&&a!==null&&a[We]===e?We++:Le===null?Le=[e]:(!xt||!Le.includes(e))&&Le.push(e))}else if(r&&e.deps===null&&e.effects===null){var n=e,o=n.parent;o!==null&&!(o.f&Ye)&&(n.f^=Ye)}return r&&(n=e,jt(n)&&Mn(n)),e.v}function Ya(e){var t=bt;bt=new Set;var r=bt,a;try{if(Xe(e),t!==null)for(a of bt)t.add(a)}finally{bt=t}return r}function Ja(e){var t=Ya(()=>Xe(e));for(var r of t)if(r.f&fn)for(const a of r.deps||[])a.f&Je||Jt(a,a.v);else Jt(r,r.v)}function Xe(e){var t=tt;try{return tt=!0,e()}finally{tt=t}}const Ga=-7169;function Qe(e,t){e.f=e.f&Ga|t}function Za(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(ut in e)Ar(e);else if(!Array.isArray(e))for(let t in e){const r=e[t];typeof r=="object"&&r&&ut in r&&Ar(r)}}}function Ar(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let a in e)try{Ar(e[a],t)}catch{}const r=Ir(e);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const a=dn(r);for(let n in a){const o=a[n].get;if(o)try{o.call(e)}catch{}}}}}function Xa(e){return e.endsWith("capture")&&e!=="gotpointercapture"&&e!=="lostpointercapture"}const Qa=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function es(e){return Qa.includes(e)}const ts={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function rs(e){return e=e.toLowerCase(),ts[e]??e}const ns=["touchstart","touchmove"];function as(e){return ns.includes(e)}function ss(e,t){if(t){const r=document.body;e.autofocus=!0,Vr(()=>{document.activeElement===r&&e.focus()})}}let rn=!1;function os(){rn||(rn=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const r of e.target.elements)(t=r.__on_r)==null||t.call(r)})},{capture:!0}))}function Ln(e){var t=be,r=ge;wt(null),kt(null);try{return e()}finally{wt(t),kt(r)}}function Fn(e,t,r,a=r){e.addEventListener(t,()=>Ln(r));const n=e.__on_r;n?e.__on_r=()=>{n(),a(!0)}:e.__on_r=()=>a(!0),os()}const Wn=new Set,Nr=new Set;function jn(e,t,r,a={}){function n(o){if(a.capture||Ut.call(t,o),!o.cancelBubble)return Ln(()=>r==null?void 0:r.call(this,o))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Vr(()=>{t.addEventListener(e,n,a)}):t.addEventListener(e,n,a),n}function J(e,t,r,a,n){var o={capture:a,passive:n},i=jn(e,t,r,o);(t===document.body||t===window||t===document)&&Nn(()=>{t.removeEventListener(e,i,o)})}function is(e){for(var t=0;t<e.length;t++)Wn.add(e[t]);for(var r of Nr)r(e)}function Ut(e){var C;var t=this,r=t.ownerDocument,a=e.type,n=((C=e.composedPath)==null?void 0:C.call(e))||[],o=n[0]||e.target,i=0,l=e.__root;if(l){var u=n.indexOf(l);if(u!==-1&&(t===document||t===window)){e.__root=t;return}var c=n.indexOf(t);if(c===-1)return;u<=c&&(i=u)}if(o=n[i]||e.target,o!==t){ta(e,"currentTarget",{configurable:!0,get(){return o||r}});var _=be,v=ge;wt(null),kt(null);try{for(var p,k=[];o!==null;){var x=o.assignedSlot||o.parentNode||o.host||null;try{var P=o["__"+a];if(P!==void 0&&(!o.disabled||e.target===o))if(dr(P)){var[B,...D]=P;B.apply(o,[e,...D])}else P.call(o,e)}catch(m){p?k.push(m):p=m}if(e.cancelBubble||x===t||x===null)break;o=x}if(p){for(let m of k)queueMicrotask(()=>{throw m});throw p}}finally{e.__root=t,delete e.currentTarget,wt(_),kt(v)}}}function Vn(e){var t=document.createElement("template");return t.innerHTML=e,t.content}function Lt(e,t){var r=ge;r.nodes_start===null&&(r.nodes_start=e,r.nodes_end=t)}function $(e,t){var r=(t&Ea)!==0,a=(t&Ca)!==0,n,o=!e.startsWith("<!>");return()=>{n===void 0&&(n=Vn(o?e:"<!>"+e),r||(n=qt(n)));var i=a||$n?document.importNode(n,!0):n.cloneNode(!0);if(r){var l=qt(i),u=i.lastChild;Lt(l,u)}else Lt(i,i);return i}}function ls(e,t,r="svg"){var a=!e.startsWith("<!>"),n=`<${r}>${a?e:"<!>"+e}</${r}>`,o;return()=>{if(!o){var i=Vn(n),l=qt(i);o=qt(l)}var u=o.cloneNode(!0);return Lt(u,u),u}}function Ke(e=""){{var t=er(e+"");return Lt(t,t),t}}function F(){var e=document.createDocumentFragment(),t=document.createComment(""),r=er();return e.append(t,r),Lt(t,r),e}function d(e,t){e!==null&&e.before(t)}function j(e,t){var r=t==null?"":typeof t=="object"?t+"":t;r!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=r,e.nodeValue=r+"")}function cs(e,t){return us(e,t)}const Tt=new Map;function us(e,{target:t,anchor:r,props:a={},events:n,context:o,intro:i=!0}){Ma();var l=new Set,u=v=>{for(var p=0;p<v.length;p++){var k=v[p];if(!l.has(k)){l.add(k);var x=as(k);t.addEventListener(k,Ut,{passive:x});var P=Tt.get(k);P===void 0?(document.addEventListener(k,Ut,{passive:x}),Tt.set(k,1)):Tt.set(k,P+1)}}};u(Br(Wn)),Nr.add(u);var c=void 0,_=Da(()=>{var v=r??t.appendChild(er());return At(()=>{if(o){je({});var p=me;p.c=o}n&&(a.$$events=n),c=e(v,a)||{},o&&Ve()}),()=>{var x;for(var p of l){t.removeEventListener(p,Ut);var k=Tt.get(p);--k===0?(document.removeEventListener(p,Ut),Tt.delete(p)):Tt.set(p,k)}Nr.delete(u),v!==r&&((x=v.parentNode)==null||x.removeChild(v))}});return ds.set(c,_),c}let ds=new WeakMap;function I(e,t,r=!1){var a=e,n=null,o=null,i=Fe,l=r?Xt:0,u=!1;const c=(v,p=!0)=>{u=!0,_(p,v)},_=(v,p)=>{i!==(i=v)&&(i?(n?Gt(n):p&&(n=At(()=>p(a))),o&&Rt(o,()=>{o=null})):(o?Gt(o):p&&(o=At(()=>p(a))),n&&Rt(n,()=>{n=null})))};tr(()=>{u=!1,t(c),u||_(null,null)},l)}function Ae(e,t){return t}function vs(e,t,r,a){for(var n=[],o=t.length,i=0;i<o;i++)jr(t[i].e,n,!0);var l=o>0&&n.length===0&&r!==null;if(l){var u=r.parentNode;Aa(u),u.append(r),a.clear(),mt(e,t[0].prev,t[o-1].next)}Dn(n,()=>{for(var c=0;c<o;c++){var _=t[c];l||(a.delete(_.k),mt(e,_.prev,_.next)),dt(_.e,!l)}})}function Ne(e,t,r,a,n,o=null){var i=e,l={flags:t,items:new Map,first:null},u=(t&bn)!==0;if(u){var c=e;i=c.appendChild(er())}var _=null,v=!1,p=Ce(()=>{var k=r();return dr(k)?k:k==null?[]:Br(k)});tr(()=>{var k=s(p),x=k.length;v&&x===0||(v=x===0,fs(k,l,i,n,t,a,r),o!==null&&(x===0?_?Gt(_):_=At(()=>o(i)):_!==null&&Rt(_,()=>{_=null})),s(p))})}function fs(e,t,r,a,n,o,i){var X,ce,se,M;var l=(n&ha)!==0,u=(n&(Rr|Lr))!==0,c=e.length,_=t.items,v=t.first,p=v,k,x=null,P,B=[],D=[],C,m,b,w;if(l)for(w=0;w<c;w+=1)C=e[w],m=o(C,w),b=_.get(m),b!==void 0&&((X=b.a)==null||X.measure(),(P??(P=new Set)).add(b));for(w=0;w<c;w+=1){if(C=e[w],m=o(C,w),b=_.get(m),b===void 0){var h=p?p.e.nodes_start:r;x=_s(h,t,x,x===null?t.first:x.next,C,m,w,a,n,i),_.set(m,x),B=[],D=[],p=x.next;continue}if(u&&ps(b,C,w,n),b.e.f&ct&&(Gt(b.e),l&&((ce=b.a)==null||ce.unfix(),(P??(P=new Set)).delete(b))),b!==p){if(k!==void 0&&k.has(b)){if(B.length<D.length){var E=D[0],S;x=E.prev;var U=B[0],Z=B[B.length-1];for(S=0;S<B.length;S+=1)nn(B[S],E,r);for(S=0;S<D.length;S+=1)k.delete(D[S]);mt(t,U.prev,Z.next),mt(t,x,U),mt(t,Z,E),p=E,x=Z,w-=1,B=[],D=[]}else k.delete(b),nn(b,p,r),mt(t,b.prev,b.next),mt(t,b,x===null?t.first:x.next),mt(t,x,b),x=b;continue}for(B=[],D=[];p!==null&&p.k!==m;)p.e.f&ct||(k??(k=new Set)).add(p),D.push(p),p=p.next;if(p===null)continue;b=p}B.push(b),x=b,p=b.next}if(p!==null||k!==void 0){for(var Y=k===void 0?[]:Br(k);p!==null;)p.e.f&ct||Y.push(p),p=p.next;var A=Y.length;if(A>0){var W=n&bn&&c===0?r:null;if(l){for(w=0;w<A;w+=1)(se=Y[w].a)==null||se.measure();for(w=0;w<A;w+=1)(M=Y[w].a)==null||M.fix()}vs(t,Y,W,_)}}l&&Vr(()=>{var N;if(P!==void 0)for(b of P)(N=b.a)==null||N.apply()}),ge.first=t.first&&t.first.e,ge.last=x&&x.e}function ps(e,t,r,a){a&Rr&&Jt(e.v,t),a&Lr?Jt(e.i,r):e.i=r}function _s(e,t,r,a,n,o,i,l,u,c){var _=(u&Rr)!==0,v=(u&ya)===0,p=_?v?Wr(n):Re(n):n,k=u&Lr?Re(i):i,x={i:k,v:p,k:o,a:null,e:null,prev:r,next:a};try{return x.e=At(()=>l(e,p,k,c),kn),x.e.prev=r&&r.e,x.e.next=a&&a.e,r===null?t.first=x:(r.next=x,r.e.next=x.e),a!==null&&(a.prev=x,a.e.prev=x.e),x}finally{}}function nn(e,t,r){for(var a=e.next?e.next.e.nodes_start:r,n=t?t.e.nodes_start:r,o=e.e.nodes_start;o!==a;){var i=pr(o);n.before(o),o=i}}function mt(e,t,r){t===null?e.first=r:(t.next=r,t.e.next=r&&r.e),r!==null&&(r.prev=t,r.e.prev=t&&t.e)}function Ee(e,t,r,a,n){var l;var o=(l=t.$$slots)==null?void 0:l[r],i=!1;o===!0&&(o=t.children,i=!0),o===void 0||o(e,i?()=>a:a)}function Un(e,t,r){var a=e,n,o;tr(()=>{n!==(n=t())&&(o&&(Rt(o),o=null),n&&(o=At(()=>r(a,n))))},Xt)}function gs(e,t,r,a,n,o){var i,l,u=null,c=e,_;tr(()=>{const v=t()||null;var p=yn;v!==i&&(_&&(v===null?Rt(_,()=>{_=null,l=null}):v===l?Gt(_):dt(_)),v&&v!==l&&(_=At(()=>{if(u=document.createElementNS(p,v),Lt(u,u),a){var k=u.appendChild(er());a(u,k)}ge.nodes_end=u,c.before(u)})),i=v,i&&(l=i))},Xt)}function Kn(e){var t,r,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var n=e.length;for(t=0;t<n;t++)e[t]&&(r=Kn(e[t]))&&(a&&(a+=" "),a+=r)}else for(r in e)e[r]&&(a&&(a+=" "),a+=r);return a}function ms(){for(var e,t,r=0,a="",n=arguments.length;r<n;r++)(e=arguments[r])&&(t=Kn(e))&&(a&&(a+=" "),a+=t);return a}function zr(e){return typeof e=="object"?ms(e):e??""}function an(e,t){var r=e.__attributes??(e.__attributes={});r.value===(r.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function bs(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function ht(e,t,r,a){var n=e.__attributes??(e.__attributes={});n[t]!==(n[t]=r)&&(t==="style"&&"__styles"in e&&(e.__styles={}),t==="loading"&&(e[ia]=r),r==null?e.removeAttribute(t):typeof r!="string"&&Hn(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function sn(e,t,r,a,n=!1,o=!1,i=!1){var l=t||{},u=e.tagName==="OPTION";for(var c in t)c in r||(r[c]=null);r.class&&(r.class=zr(r.class));var _=Hn(e),v=e.__attributes??(e.__attributes={});for(const C in r){let m=r[C];if(u&&C==="value"&&m==null){e.value=e.__value="",l[C]=m;continue}var p=l[C];if(m!==p){l[C]=m;var k=C[0]+C[1];if(k!=="$$"){if(k==="on"){const b={},w="$$"+C;let h=C.slice(2);var x=es(h);if(Xa(h)&&(h=h.slice(0,-7),b.capture=!0),!x&&p){if(m!=null)continue;e.removeEventListener(h,l[w],b),l[w]=null}if(m!=null)if(x)e[`__${h}`]=m,is([h]);else{let E=function(S){l[C].call(this,S)};var D=E;l[w]=jn(h,e,E,b)}else x&&(e[`__${h}`]=void 0)}else if(C==="style"&&m!=null)e.style.cssText=m+"";else if(C==="autofocus")ss(e,!!m);else if(!o&&(C==="__value"||C==="value"&&m!=null))e.value=e.__value=m;else if(C==="selected"&&u)bs(e,m);else{var P=C;n||(P=rs(P));var B=P==="defaultValue"||P==="defaultChecked";if(m==null&&!o&&!B)if(v[C]=null,P==="value"||P==="checked"){let b=e;const w=t===void 0;if(P==="value"){let h=b.defaultValue;b.removeAttribute(P),b.defaultValue=h,b.value=b.__value=w?h:null}else{let h=b.defaultChecked;b.removeAttribute(P),b.defaultChecked=h,b.checked=w?h:!1}}else e.removeAttribute(C);else B||_.includes(P)&&(o||typeof m!="string")?e[P]=m:typeof m!="function"&&ht(e,P,m)}C==="style"&&"__styles"in e&&(e.__styles={})}}}return l}var on=new Map;function Hn(e){var t=on.get(e.nodeName);if(t)return t;on.set(e.nodeName,t=[]);for(var r,a=e,n=Element.prototype;n!==a;){r=dn(a);for(var o in r)r[o].set&&t.push(o);a=Ir(a)}return t}function He(e,t,r){var a=e.__className,n=hs(t,r);(a!==n||kn)&&(t==null&&!r?e.removeAttribute("class"):e.className=n,e.__className=n)}function hs(e,t){return(e??"")+(t?" "+t:"")}function yr(e,t,r){if(r){if(e.classList.contains(t))return;e.classList.add(t)}else{if(!e.classList.contains(t))return;e.classList.remove(t)}}function Mt(e,t,r=t){var a=Qt();Fn(e,"input",n=>{var o=n?e.defaultValue:e.value;if(o=xr(e)?wr(o):o,r(o),a&&o!==(o=t())){var i=e.selectionStart,l=e.selectionEnd;e.value=o??"",l!==null&&(e.selectionStart=i,e.selectionEnd=Math.min(l,e.value.length))}}),Xe(t)==null&&e.value&&r(xr(e)?wr(e.value):e.value),gr(()=>{var n=t();xr(e)&&n===wr(e.value)||e.type==="date"&&!n&&!e.value||n!==e.value&&(e.value=n??"")})}function xr(e){var t=e.type;return t==="number"||t==="range"}function wr(e){return e===""?null:+e}function ln(e,t,r){var a=lt(e,t);a&&a.set&&(e[t]=r,Nn(()=>{e[t]=null}))}function Yn(e,t,r){if(e.multiple)return ws(e,t);for(var a of e.options){var n=Ht(a);if(Sa(n,t)){a.selected=!0;return}}(!r||t!==void 0)&&(e.selectedIndex=-1)}function ys(e,t){_r(()=>{var r=new MutationObserver(()=>{var a=e.__value;Yn(e,a)});return r.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{r.disconnect()}})}function xs(e,t,r=t){var a=!0;Fn(e,"change",n=>{var o=n?"[selected]":":checked",i;if(e.multiple)i=[].map.call(e.querySelectorAll(o),Ht);else{var l=e.querySelector(o)??e.querySelector("option:not([disabled])");i=l&&Ht(l)}r(i)}),_r(()=>{var n=t();if(Yn(e,n,a),a&&n===void 0){var o=e.querySelector(":checked");o!==null&&(n=Ht(o),r(n))}e.__value=n,a=!1}),ys(e)}function ws(e,t){for(var r of e.options)r.selected=~t.indexOf(Ht(r))}function Ht(e){return"__value"in e?e.__value:e.value}function et(e=!1){const t=me,r=t.l.u;if(!r)return;let a=()=>Za(t.s);if(e){let n=0,o={};const i=Ot(()=>{let l=!1;const u=t.s;for(const c in u)u[c]!==o[c]&&(o[c]=u[c],l=!0);return l&&n++,n});a=()=>s(i)}r.b.length&&Ta(()=>{cn(t,a),kr(r.b)}),Er(()=>{const n=Xe(()=>r.m.map(aa));return()=>{for(const o of n)typeof o=="function"&&o()}}),r.a.length&&Er(()=>{cn(t,a),kr(r.a)})}function cn(e,t){if(e.l.s)for(const r of e.l.s)s(r);t()}function ks(e){var t=Re(0);return function(){return arguments.length===1?(y(t,s(t)+1),arguments[0]):(s(t),e())}}function $s(e,t,r){if(e==null)return t(void 0),nr;const a=Xe(()=>e.subscribe(t,r));return a.unsubscribe?()=>a.unsubscribe():a}const Dt=[];function Kr(e,t=nr){let r=null;const a=new Set;function n(l){if(mn(e,l)&&(e=l,r)){const u=!Dt.length;for(const c of a)c[1](),Dt.push(c,e);if(u){for(let c=0;c<Dt.length;c+=2)Dt[c][0](Dt[c+1]);Dt.length=0}}}function o(l){n(l(e))}function i(l,u=nr){const c=[l,u];return a.add(c),a.size===1&&(r=t(n,o)||nr),l(e),()=>{a.delete(c),a.size===0&&r&&(r(),r=null)}}return{set:n,update:o,subscribe:i}}function Bt(e){let t;return $s(e,r=>t=r)(),t}let rr=!1;function Es(e){var t=rr;try{return rr=!1,[e(),rr]}finally{rr=t}}const Cs={get(e,t){if(!e.exclude.includes(t))return s(e.version),t in e.special?e.special[t]():e.props[t]},set(e,t,r){return t in e.special||(e.special[t]=Be({get[t](){return e.props[t]}},t,hn)),e.special[t](r),Jr(e.version),!0},getOwnPropertyDescriptor(e,t){if(!e.exclude.includes(t)&&t in e.props)return{enumerable:!0,configurable:!0,value:e.props[t]}},deleteProperty(e,t){return e.exclude.includes(t)||(e.exclude.push(t),Jr(e.version)),!0},has(e,t){return e.exclude.includes(t)?!1:t in e.props},ownKeys(e){return Reflect.ownKeys(e.props).filter(t=>!e.exclude.includes(t))}};function $e(e,t){return new Proxy({props:e,exclude:t,special:{},version:Re(0)},Cs)}const Ss={get(e,t){let r=e.props.length;for(;r--;){let a=e.props[r];if(Vt(a)&&(a=a()),typeof a=="object"&&a!==null&&t in a)return a[t]}},set(e,t,r){let a=e.props.length;for(;a--;){let n=e.props[a];Vt(n)&&(n=n());const o=lt(n,t);if(o&&o.set)return o.set(r),!0}return!1},getOwnPropertyDescriptor(e,t){let r=e.props.length;for(;r--;){let a=e.props[r];if(Vt(a)&&(a=a()),typeof a=="object"&&a!==null&&t in a){const n=lt(a,t);return n&&!n.configurable&&(n.configurable=!0),n}}},has(e,t){if(t===ut||t===_n)return!1;for(let r of e.props)if(Vt(r)&&(r=r()),r!=null&&t in r)return!0;return!1},ownKeys(e){const t=[];for(let r of e.props){Vt(r)&&(r=r());for(const a in r)t.includes(a)||t.push(a)}return t}};function Se(...e){return new Proxy({props:e},Ss)}function Be(e,t,r,a){var E;var n=(r&xa)!==0,o=!Ft||(r&wa)!==0,i=(r&ka)!==0,l=(r&$a)!==0,u=!1,c;i?[c,u]=Es(()=>e[t]):c=e[t];var _=ut in e||_n in e,v=i&&(((E=lt(e,t))==null?void 0:E.set)??(_&&t in e&&(S=>e[t]=S)))||void 0,p=a,k=!0,x=!1,P=()=>(x=!0,k&&(k=!1,l?p=Xe(a):p=a),p);c===void 0&&a!==void 0&&(v&&o&&va(),c=P(),v&&v(c));var B;if(o)B=()=>{var S=e[t];return S===void 0?P():(k=!0,x=!1,S)};else{var D=(n?Ot:Ce)(()=>e[t]);D.f|=fn,B=()=>{var S=s(D);return S!==void 0&&(p=void 0),S===void 0?p:S}}if(!(r&hn))return B;if(v){var C=e.$$legacy;return function(S,U){return arguments.length>0?((!o||!U||C||u)&&v(U?B():S),S):B()}}var m=!1,b=!1,w=Wr(c),h=Ot(()=>{var S=B(),U=s(w);return m?(m=!1,b=!0,U):(b=!1,w.v=S)});return n||(h.equals=Or),function(S,U){if(bt!==null&&(m=b,B(),s(w)),arguments.length>0){const Z=U?s(h):o&&i?it(S):S;return h.equals(Z)||(m=!0,y(w,Z),x&&p!==void 0&&(p=Z),Xe(()=>s(h))),S}return s(h)}}function zt(e){me===null&&Fr(),Ft&&me.l!==null?zs(me).m.push(e):Er(()=>{const t=Xe(e);if(typeof t=="function")return t})}function Ms(e){me===null&&Fr(),zt(()=>()=>Xe(e))}function As(e,t,{bubbles:r=!1,cancelable:a=!1}={}){return new CustomEvent(e,{detail:t,bubbles:r,cancelable:a})}function Ns(){const e=me;return e===null&&Fr(),(t,r,a)=>{var o;const n=(o=e.s.$$events)==null?void 0:o[t];if(n){const i=dr(n)?n.slice():[n],l=As(t,r,a);for(const u of i)u.call(e.x,l);return!l.defaultPrevented}return!0}}function zs(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const Ps="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ps);ba();/**
 * @license lucide-svelte v0.475.0 - ISC
 *
 * ISC License
 * 
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 * 
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 * 
 */const Ts={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var Ds=ls("<svg><!><!></svg>");function Me(e,t){const r=$e(t,["children","$$slots","$$events","$$legacy"]),a=$e(r,["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"]);je(t,!1);let n=Be(t,"name",8,void 0),o=Be(t,"color",8,"currentColor"),i=Be(t,"size",8,24),l=Be(t,"strokeWidth",8,2),u=Be(t,"absoluteStrokeWidth",8,!1),c=Be(t,"iconNode",24,()=>[]);const _=(...P)=>P.filter((B,D,C)=>!!B&&C.indexOf(B)===D).join(" ");et();var v=Ds();let p;var k=f(v);Ne(k,1,c,Ae,(P,B)=>{let D=()=>s(B)[0],C=()=>s(B)[1];var m=F(),b=q(m);gs(b,D,!0,(w,h)=>{let E;K(()=>E=sn(w,E,{...C()},void 0,w.namespaceURI===yn,w.nodeName.includes("-")))}),d(P,m)});var x=g(k);Ee(x,t,"default",{}),K((P,B)=>p=sn(v,p,{...Ts,...a,width:i(),height:i(),stroke:o(),"stroke-width":P,class:B},void 0,!0),[()=>u()?Number(l())*24/Number(i()):l(),()=>_("lucide-icon","lucide",n()?`lucide-${n()}`:"",r.class)],Ce),d(e,v),Ve()}function Jn(e,t){const r=$e(t,["children","$$slots","$$events","$$legacy"]);Me(e,Se({name:"arrow-down"},()=>r,{iconNode:[["path",{d:"M12 5v14"}],["path",{d:"m19 12-7 7-7-7"}]],children:(n,o)=>{var i=F(),l=q(i);Ee(l,t,"default",{}),d(n,i)},$$slots:{default:!0}}))}function Pr(e,t){const r=$e(t,["children","$$slots","$$events","$$legacy"]);Me(e,Se({name:"arrow-left"},()=>r,{iconNode:[["path",{d:"m12 19-7-7 7-7"}],["path",{d:"M19 12H5"}]],children:(n,o)=>{var i=F(),l=q(i);Ee(l,t,"default",{}),d(n,i)},$$slots:{default:!0}}))}function Tr(e,t){const r=$e(t,["children","$$slots","$$events","$$legacy"]);Me(e,Se({name:"arrow-right"},()=>r,{iconNode:[["path",{d:"M5 12h14"}],["path",{d:"m12 5 7 7-7 7"}]],children:(n,o)=>{var i=F(),l=q(i);Ee(l,t,"default",{}),d(n,i)},$$slots:{default:!0}}))}function Gn(e,t){const r=$e(t,["children","$$slots","$$events","$$legacy"]);Me(e,Se({name:"arrow-up"},()=>r,{iconNode:[["path",{d:"m5 12 7-7 7 7"}],["path",{d:"M12 19V5"}]],children:(n,o)=>{var i=F(),l=q(i);Ee(l,t,"default",{}),d(n,i)},$$slots:{default:!0}}))}function Bs(e,t){const r=$e(t,["children","$$slots","$$events","$$legacy"]);Me(e,Se({name:"circle-stop"},()=>r,{iconNode:[["circle",{cx:"12",cy:"12",r:"10"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1"}]],children:(n,o)=>{var i=F(),l=q(i);Ee(l,t,"default",{}),d(n,i)},$$slots:{default:!0}}))}function Is(e,t){const r=$e(t,["children","$$slots","$$events","$$legacy"]);Me(e,Se({name:"clock"},()=>r,{iconNode:[["circle",{cx:"12",cy:"12",r:"10"}],["polyline",{points:"12 6 12 12 16 14"}]],children:(n,o)=>{var i=F(),l=q(i);Ee(l,t,"default",{}),d(n,i)},$$slots:{default:!0}}))}function qs(e,t){const r=$e(t,["children","$$slots","$$events","$$legacy"]);Me(e,Se({name:"coffee"},()=>r,{iconNode:[["path",{d:"M10 2v2"}],["path",{d:"M14 2v2"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1"}],["path",{d:"M6 2v2"}]],children:(n,o)=>{var i=F(),l=q(i);Ee(l,t,"default",{}),d(n,i)},$$slots:{default:!0}}))}function Os(e,t){const r=$e(t,["children","$$slots","$$events","$$legacy"]);Me(e,Se({name:"file-json"},()=>r,{iconNode:[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1"}]],children:(n,o)=>{var i=F(),l=q(i);Ee(l,t,"default",{}),d(n,i)},$$slots:{default:!0}}))}function Rs(e,t){const r=$e(t,["children","$$slots","$$events","$$legacy"]);Me(e,Se({name:"layout-grid"},()=>r,{iconNode:[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1"}]],children:(n,o)=>{var i=F(),l=q(i);Ee(l,t,"default",{}),d(n,i)},$$slots:{default:!0}}))}function Ls(e,t){const r=$e(t,["children","$$slots","$$events","$$legacy"]);Me(e,Se({name:"list"},()=>r,{iconNode:[["path",{d:"M3 12h.01"}],["path",{d:"M3 18h.01"}],["path",{d:"M3 6h.01"}],["path",{d:"M8 12h13"}],["path",{d:"M8 18h13"}],["path",{d:"M8 6h13"}]],children:(n,o)=>{var i=F(),l=q(i);Ee(l,t,"default",{}),d(n,i)},$$slots:{default:!0}}))}function Zn(e,t){const r=$e(t,["children","$$slots","$$events","$$legacy"]);Me(e,Se({name:"moon"},()=>r,{iconNode:[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"}]],children:(n,o)=>{var i=F(),l=q(i);Ee(l,t,"default",{}),d(n,i)},$$slots:{default:!0}}))}function Fs(e,t){const r=$e(t,["children","$$slots","$$events","$$legacy"]);Me(e,Se({name:"play"},()=>r,{iconNode:[["polygon",{points:"6 3 20 12 6 21 6 3"}]],children:(n,o)=>{var i=F(),l=q(i);Ee(l,t,"default",{}),d(n,i)},$$slots:{default:!0}}))}function Ws(e,t){const r=$e(t,["children","$$slots","$$events","$$legacy"]);Me(e,Se({name:"printer"},()=>r,{iconNode:[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1"}]],children:(n,o)=>{var i=F(),l=q(i);Ee(l,t,"default",{}),d(n,i)},$$slots:{default:!0}}))}function js(e,t){const r=$e(t,["children","$$slots","$$events","$$legacy"]);Me(e,Se({name:"settings"},()=>r,{iconNode:[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}],["circle",{cx:"12",cy:"12",r:"3"}]],children:(n,o)=>{var i=F(),l=q(i);Ee(l,t,"default",{}),d(n,i)},$$slots:{default:!0}}))}function Vs(e,t){const r=$e(t,["children","$$slots","$$events","$$legacy"]);Me(e,Se({name:"skip-back"},()=>r,{iconNode:[["polygon",{points:"19 20 9 12 19 4 19 20"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5"}]],children:(n,o)=>{var i=F(),l=q(i);Ee(l,t,"default",{}),d(n,i)},$$slots:{default:!0}}))}function Us(e,t){const r=$e(t,["children","$$slots","$$events","$$legacy"]);Me(e,Se({name:"skip-forward"},()=>r,{iconNode:[["polygon",{points:"5 4 15 12 5 20 5 4"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19"}]],children:(n,o)=>{var i=F(),l=q(i);Ee(l,t,"default",{}),d(n,i)},$$slots:{default:!0}}))}function Xn(e,t){const r=$e(t,["children","$$slots","$$events","$$legacy"]);Me(e,Se({name:"sun"},()=>r,{iconNode:[["circle",{cx:"12",cy:"12",r:"4"}],["path",{d:"M12 2v2"}],["path",{d:"M12 20v2"}],["path",{d:"m4.93 4.93 1.41 1.41"}],["path",{d:"m17.66 17.66 1.41 1.41"}],["path",{d:"M2 12h2"}],["path",{d:"M20 12h2"}],["path",{d:"m6.34 17.66-1.41 1.41"}],["path",{d:"m19.07 4.93-1.41 1.41"}]],children:(n,o)=>{var i=F(),l=q(i);Ee(l,t,"default",{}),d(n,i)},$$slots:{default:!0}}))}function Qn(e,t){const r=$e(t,["children","$$slots","$$events","$$legacy"]);Me(e,Se({name:"volume-2"},()=>r,{iconNode:[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z"}],["path",{d:"M16 9a5 5 0 0 1 0 6"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728"}]],children:(n,o)=>{var i=F(),l=q(i);Ee(l,t,"default",{}),d(n,i)},$$slots:{default:!0}}))}function Dr(e,t){const r=$e(t,["children","$$slots","$$events","$$legacy"]);Me(e,Se({name:"volume-x"},()=>r,{iconNode:[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15"}]],children:(n,o)=>{var i=F(),l=q(i);Ee(l,t,"default",{}),d(n,i)},$$slots:{default:!0}}))}function Ks(e,t){const r=$e(t,["children","$$slots","$$events","$$legacy"]);Me(e,Se({name:"zap"},()=>r,{iconNode:[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"}]],children:(n,o)=>{var i=F(),l=q(i);Ee(l,t,"default",{}),d(n,i)},$$slots:{default:!0}}))}function Hs(){let e=$r(null),t=$r(null);return{get selectedComponent(){return s(e)},set selectedComponent(r){y(e,it(r))},get selectedComponentType(){return s(t)},set selectedComponentType(r){y(t,it(r))}}}const St=Hs(),Ct=window.location.hostname==="localhost"?"http://localhost:80":`http://${window.location.hostname}`,un=window.location.hostname==="localhost"?"ws://localhost:80/ws":`ws://${window.location.hostname}/ws`;function Ys(){const{subscribe:e,set:t,update:r}=Kr([]),a={subscribe:e,fetchAll:async()=>{try{const n=await fetch(`${Ct}/api/macros`);if(!n.ok)throw new Error(`Failed to fetch macros: ${n.status} ${n.statusText}`);const o=await n.json(),i=o.macros||o;return t(i),i}catch(n){throw console.error("Error fetching macros:",n),n}},fetchMacro:async n=>{try{const o=await fetch(`${Ct}/api/macros/${n}`);if(!o.ok)throw new Error(`Failed to fetch macro: ${o.status} ${o.statusText}`);return await o.json()}catch(o){throw console.error(`Error fetching macro ${n}:`,o),o}},createMacro:async n=>{try{const o=await fetch(`${Ct}/api/macros`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!o.ok)throw new Error(`Failed to create macro: ${o.status} ${o.statusText}`);const i=await o.json();return await a.fetchAll(),i}catch(o){throw console.error("Error creating macro:",o),o}},updateMacro:async(n,o)=>{try{const i=await fetch(`${Ct}/api/macros`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...o,id:n})});if(!i.ok)throw new Error(`Failed to update macro: ${i.status} ${i.statusText}`);const l=await i.json();return await a.fetchAll(),l}catch(i){throw console.error(`Error updating macro ${n}:`,i),i}},deleteMacro:async n=>{try{const o=await fetch(`${Ct}/api/macros/${n}`,{method:"DELETE"});if(!o.ok)throw new Error(`Failed to delete macro: ${o.status} ${o.statusText}`);r(i=>i.filter(l=>l.id!==n))}catch(o){throw console.error(`Error deleting macro ${n}:`,o),o}},executeMacro:async n=>ye.executeMacro(n)};return a}function Js(){const{subscribe:e,update:t}=Kr({connected:!1,connectionVerified:!1,events:[],lastPingResponse:null});let r=null,a=null,n=null;const o={subscribe:e,connect:()=>{try{if(Bt({subscribe:e}).connected)return;console.log("Attempting to connect to WebSocket at:",un),r=new WebSocket(un),r.onopen=()=>{console.log("WebSocket connected successfully"),t(l=>({...l,connected:!0})),n&&clearInterval(n),n=setInterval(()=>{try{r&&r.readyState===WebSocket.OPEN&&(r.send(JSON.stringify({command:"ping",timestamp:Date.now()})),setTimeout(()=>{const l=Bt({subscribe:e}),u=Date.now();(l.lastPingResponse===null||u-l.lastPingResponse>1e4)&&(console.log("Connection seems dead (no ping response). Reconnecting..."),o.reconnect())},1e4))}catch(l){console.error("Error sending ping:",l)}},3e4);try{r&&r.readyState===WebSocket.OPEN&&(console.log("Requesting initial configuration data"),r.send(JSON.stringify({command:"get_all_configs"})),setTimeout(()=>{Bt({subscribe:e}).connectionVerified||(console.warn("No initial data received. Connection may be partially working."),t(u=>({...u,connectionVerified:!1})))},5e3))}catch(l){console.error("Error requesting initial data:",l)}},r.onclose=()=>{a&&clearTimeout(a),n&&clearInterval(n),t(l=>({...l,connected:!1,connectionVerified:!1})),console.log("WebSocket disconnected, will attempt to reconnect"),a=setTimeout(()=>o.connect(),3e3)},r.onerror=l=>{console.log("WebSocket connection error, will retry automatically"),t(u=>({...u,connected:!1,connectionVerified:!1}))},r.onmessage=l=>{if(typeof l.data!="string"){console.log("Received binary data, ignoring");return}const u=JSON.parse(l.data);console.log("WS received data:",u),Bt(o).connectionVerified||t(c=>({...c,connectionVerified:!0,lastMessage:new Date().toISOString()})),t(c=>({...c,lastMessage:new Date().toISOString()})),u.type==="status"?t(c=>({...c,status:u})):u.type==="config_data"?(console.log("Received config data:",u),t(c=>({...c,events:[...c.events.slice(-99),u]}))):u.type==="all_configs"?(console.log("Received all configs:",u),t(c=>({...c,events:[...c.events.slice(-99),{type:"all_configs",data:u,timestamp:new Date().toISOString()}]}))):u.type==="error"?(console.error("WebSocket error:",u.message),t(c=>({...c,error:u.message,lastError:new Date().toISOString()}))):u.status==="error"?(console.error("API error:",u.message),t(c=>({...c,error:u.message,lastError:new Date().toISOString()}))):u.status==="success"?t(c=>({...c,error:null,events:[...c.events.slice(-99),u]})):t(c=>({...c,events:[...c.events.slice(-99),u]}))}}catch{console.log("Error initializing WebSocket, will retry"),a=setTimeout(()=>o.connect(),3e3)}},reconnect:()=>{o.disconnect(),o.connect()},disconnect:()=>{r&&(r.close(),a&&(clearTimeout(a),a=null),n&&(clearInterval(n),n=null)),t(i=>({connected:!1,connectionVerified:!1,events:[],lastPingResponse:null}))},sendMessage:i=>{const l=Bt({subscribe:e});if(r&&r.readyState===WebSocket.OPEN)return console.log("Sending WebSocket message:",i),r.send(JSON.stringify(i)),Promise.resolve();{const u=l.connected?"WebSocket appears connected but is not in OPEN state":"WebSocket not connected";return console.error(u,". Unable to send message."),Promise.reject(new Error(u))}},executeMacro:i=>o.sendMessage({command:"execute_macro",macroId:i}),assignMacroToButton:(i,l)=>{let u=l;if(l.startsWith("button-"))u=l.replace("button-","btn-");else if(l.startsWith("rotary-btn-"))u=l.replace("rotary-btn-","enc-btn-");else if(l.startsWith("encoder-"))l.includes("btn")||l.includes("button")?u=l.replace(/^encoder-(.*)$/,(c,_)=>`enc-btn-${_.replace(/\D/g,"")}`):u=l.replace(/^encoder-(.*)$/,(c,_)=>`enc-${_.replace(/\D/g,"")}`);else if(!l.startsWith("btn-")&&!l.startsWith("enc-")&&!l.startsWith("display-")){const c=parseInt(l);!isNaN(c)&&c>=0&&(u=`btn-${c+1}`)}return console.log(`Assigning macro ${i} to component ${u}`),o.sendMessage({command:"assign_macro",macroId:i,componentId:u})},saveMacro:i=>o.sendMessage({command:"save_macro",macro:i}),clearEvents:()=>{t(i=>({...i,events:[]}))},requestConfig:i=>(console.log(`Requesting specific config: ${i}`),o.sendMessage({type:"get_config",configType:i}).catch(l=>(console.log(`WebSocket request failed, falling back to REST API: ${l.message}`),fetch(`${Ct}/api/config/${i}`).then(u=>{if(!u.ok)throw new Error(`REST API returned ${u.status}`);return u.json()}).then(u=>{const c={type:"config_data",configType:i,data:u};t(_=>({..._,events:[..._.events.slice(-99),c]}))})))),updateLED:(i,l,u,c)=>o.sendMessage({command:"update_led",index:i,r:l,g:u,b:c}),saveLEDConfig:()=>o.sendMessage({command:"save_config"}),getLEDConfig:()=>o.sendMessage({command:"get_config",configType:"led"}),requestAllConfigs:()=>(console.log("Requesting all config files"),o.sendMessage({type:"get_all_configs"})),switchLayer:i=>o.sendMessage({command:"switch_layer",layer:i})};return o}function Gs(){const{subscribe:e,update:t}=Kr({loading:!1,error:null,lastSaved:null});return{subscribe:e,saveConfig:async r=>{try{t(n=>({...n,loading:!0,error:null}));const a=await fetch(`${Ct}/api/config`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({modules:r})});if(!a.ok)throw new Error(`Failed to save configuration: ${a.status} ${a.statusText}`);return t(n=>({...n,loading:!1,lastSaved:new Date().toISOString()})),!0}catch(a){throw console.error("Error saving configuration:",a),t(n=>({...n,loading:!1,error:a.message||"Failed to save configuration"})),a}},saveConfigWs:r=>Bt(ye).connected?ye.sendMessage({command:"save_config",data:{modules:r}}).then(()=>(t(a=>({...a,lastSaved:new Date().toISOString()})),!0)):Promise.reject(new Error("WebSocket not connected"))}}const yt=Ys(),ye=Js(),Yt=Gs();var Ze=ks(()=>St),Zs=$('<p class="assignment-line svelte-1uxp99e"><span class="component-name svelte-1uxp99e"> </span> <span class="new-binding-label svelte-1uxp99e">New:</span> <span class="new-binding svelte-1uxp99e"><!></span></p>'),Xs=$('<p class="assignment-line pending svelte-1uxp99e"><span class="component-name svelte-1uxp99e"> </span> <span class="new-binding-label svelte-1uxp99e">New Assignment:</span> <span class="new-binding svelte-1uxp99e"> </span></p> <div class="action-buttons svelte-1uxp99e"><button class="apply-button svelte-1uxp99e">Apply Changes</button></div>',1),Qs=$('<h3>Component Details</h3> <div class="details-content svelte-1uxp99e"><p class="svelte-1uxp99e"><strong>ID:</strong> </p> <p class="svelte-1uxp99e"><strong>Type:</strong> </p> <p class="svelte-1uxp99e"><strong>Position:</strong> </p> <div class="assignment-details svelte-1uxp99e"><h4>Assignments</h4> <p class="assignment-line svelte-1uxp99e"><span class="component-name svelte-1uxp99e"> </span> <span class="current-binding-label svelte-1uxp99e">Current:</span> <span class="current-binding svelte-1uxp99e"> </span></p> <!> <!></div></div>',1),eo=$('<h3>Component Details</h3> <div class="details-content svelte-1uxp99e"><p class="svelte-1uxp99e"><strong>ID:</strong> </p> <p class="svelte-1uxp99e"><strong>Type:</strong> </p> <p class="svelte-1uxp99e"><strong>Position:</strong> </p> <div class="assignment-details svelte-1uxp99e"><h4>Assignments</h4> <p class="assignment-line svelte-1uxp99e"><span class="component-name svelte-1uxp99e"> </span> <span class="current-binding-label svelte-1uxp99e">Current:</span> <span class="current-binding svelte-1uxp99e"> </span></p></div></div>',1),to=$("<p>No components available</p>"),ro=$('<div class="macro-indicator svelte-1uxp99e">M</div>'),no=$('<div class="pending-change-indicator svelte-1uxp99e">!</div>'),ao=$("<div><!> <!></div>"),so=$('<div class="macro-indicator svelte-1uxp99e">M</div>'),oo=$('<div class="pending-change-indicator svelte-1uxp99e">!</div>'),io=$("<div><!> <!></div>"),lo=$('<li class="svelte-1uxp99e"><span class="component-id svelte-1uxp99e"> </span> <span class="change-details svelte-1uxp99e"><span class="from svelte-1uxp99e"> </span> <span class="arrow svelte-1uxp99e">→</span> <span class="to svelte-1uxp99e"> </span></span></li>'),co=$('<div class="pending-changes-summary svelte-1uxp99e"><h3 class="svelte-1uxp99e">Pending Changes</h3> <ul class="svelte-1uxp99e"></ul> <div class="summary-note svelte-1uxp99e">Changes will take effect after saving</div> <button class="save-button svelte-1uxp99e">Save Changes</button></div>'),uo=$('<div class="module-container svelte-1uxp99e"><div class="layout-grid svelte-1uxp99e"><div class="component-details-panel svelte-1uxp99e"><!></div> <div class="module-view svelte-1uxp99e"><h2 class="svelte-1uxp99e"></h2> <h5 class="svelte-1uxp99e"></h5> <div class="module svelte-1uxp99e"></div></div></div> <!></div>');function vo(e,t){je(t,!1);let r=Be(t,"moduleInfo",8);const a=r().id,n=r().name,o=r().gridSize,i=r().components;let l=ne({}),u=[],c=!0,_=ne({}),v=ne(null);zt(async()=>{try{c=!0;const M=ye.subscribe(N=>{if(N.events&&N.events.length>0){const T=N.events.find(G=>G.key_bindings||G.data&&G.data.key_bindings);T&&(console.log("Received configuration data:",T),p(T))}});return await ye.requestAllConfigs(),u=await yt.fetchAll(),c=!1,()=>{M()}}catch(M){console.error("Failed to load data:",M),c=!1}});function p(M){const N=M.key_bindings||M.data&&M.data.key_bindings;N&&Array.isArray(N)&&(N.forEach(T=>{if(T.buttonId&&T.macro_id){let G=T.buttonId;!isNaN(parseInt(G))&&!G.startsWith("btn-")&&(G=`btn-${parseInt(G)+1}`,console.log(`Converted ID ${T.buttonId} to ${G}`)),Pe(l,s(l)[G]=T.macro_id)}}),console.log("Updated macro assignments:",s(l)))}function k(){y(l,{}),i.forEach(M=>{if(M.keyBinding&&M.keyBinding.startsWith("macro:")){const N=M.keyBinding.replace("macro:","");Pe(l,s(l)[M.id]=N)}else M.keyBinding&&Pe(l,s(l)[M.id]=M.keyBinding)})}function x(M){var N;Ze(Ze().selectedComponent=M.id),Ze(Ze().selectedComponentType=M.type),console.log(a,Ze().selectedComponent,Ze().selectedComponentType),y(v,{id:M.id,type:M.type,macroId:(N=M.keyBinding)!=null&&N.startsWith("macro:")?M.keyBinding.replace("macro:",""):null,position:M.position}),s(_)[M.id]&&Pe(v,s(v).pendingChange=s(_)[M.id])}function P(M){if(!M)return"None";if(u.length){const N=u.find(T=>T.id===M);if(N)return N.name}return M}function B(M){const N=["cell",M.id,M.type];return Ze().selectedComponent===M.id&&N.push("selected"),s(l)[M.id]&&N.push("has-macro"),s(_)[M.id]&&N.push("has-pending-change"),N.join(" ")}function D(M,N){y(_,{...s(_),[M]:{macroId:N,macroName:P(N)}}),s(v)&&s(v).id===M&&Pe(v,s(v).pendingChange=s(_)[M])}function C(){Object.keys(s(_)).length!==0&&b()}function m(){y(_,{}),s(v)&&Pe(v,s(v).pendingChange=null)}async function b(){try{for(const[M,N]of Object.entries(s(_))){const T=i.find(G=>G.id===M);T&&(T.keyBinding=N.macroId?`macro:${N.macroId}`:null)}await Yt.saveConfigWs([r()]),m(),k()}catch(M){console.error("Failed to save changes:",M)}}et();var w=uo(),h=f(w),E=f(h),S=f(E);{var U=M=>{var N=Qs(),T=g(q(N),2),G=f(T),z=g(f(G)),O=g(G,2),R=g(f(O)),V=g(O,2),te=g(f(V)),re=g(V,2),ue=g(f(re),2),oe=f(ue),L=f(oe),H=g(oe,4),ve=f(H),ee=g(ue,2);{var Q=ie=>{var _e=Zs(),le=f(_e),de=f(le),pe=g(le,4),xe=f(pe);{var ze=he=>{var qe=F(),nt=q(qe);{var pt=ke=>{var Oe=Ke("Basic Key");d(ke,Oe)},Ue=ke=>{var Oe=F(),_t=q(Oe);{var at=Te=>{var Ge=Ke("Extended Key");d(Te,Ge)},gt=Te=>{var Ge=F(),$t=q(Ge);{var Pt=De=>{var st=Ke("Macro");d(De,st)},Et=De=>{var st=Ke("None");d(De,st)};I($t,De=>{Ze().selectedTab==="Macros"?De(Pt):De(Et,!1)},!0)}d(Te,Ge)};I(_t,Te=>{Ze().selectedTab==="Extended"?Te(at):Te(gt,!1)},!0)}d(ke,Oe)};I(nt,ke=>{Ze().selectedTab==="Basic"?ke(pt):ke(Ue,!1)})}d(he,qe)},we=he=>{var qe=F(),nt=q(qe);{var pt=ke=>{var Oe=Ke("Display");d(ke,Oe)},Ue=ke=>{var Oe=F(),_t=q(Oe);{var at=Te=>{var Ge=Ke("Encoder");d(Te,Ge)},gt=Te=>{var Ge=F(),$t=q(Ge);{var Pt=De=>{var st=Ke("Encoder Button");d(De,st)},Et=De=>{var st=Ke("None");d(De,st)};I($t,De=>{s(v).type==="encoder-btn"?De(Pt):De(Et,!1)},!0)}d(Te,Ge)};I(_t,Te=>{s(v).type==="encoder"?Te(at):Te(gt,!1)},!0)}d(ke,Oe)};I(nt,ke=>{s(v).type==="display"?ke(pt):ke(Ue,!1)},!0)}d(he,qe)};I(xe,he=>{s(v).type==="button"?he(ze):he(we,!1)})}K(()=>j(de,`${s(v).id??""}:`)),d(ie,_e)};I(ee,ie=>{Ze().selectedComponent===s(v).id&&ie(Q)})}var ae=g(ee,2);{var fe=ie=>{var _e=Xs(),le=q(_e),de=f(le),pe=f(de),xe=g(de,4),ze=f(xe),we=g(le,2),he=f(we);K(()=>{j(pe,`${s(v).id??""}:`),j(ze,s(v).pendingChange.macroName||s(v).pendingChange.macroId)}),J("click",he,C),d(ie,_e)};I(ae,ie=>{s(v).pendingChange&&ie(fe)})}K(ie=>{j(z,` ${s(v).id??""}`),j(R,` ${s(v).type??""}`),j(te,` Row ${s(v).position.row??""}, Col ${s(v).position.column??""}`),j(L,`${s(v).id??""}:`),j(ve,ie)},[()=>s(v).macroId?P(s(v).macroId)||s(v).macroId:"None"],Ce),d(M,N)},Z=M=>{var N=F(),T=q(N);{var G=O=>{var R=eo(),V=g(q(R),2),te=f(V),re=g(f(te)),ue=g(te,2),oe=g(f(ue)),L=g(ue,2),H=g(f(L)),ve=g(L,2),ee=g(f(ve),2),Q=f(ee),ae=f(Q),fe=g(Q,4),ie=f(fe);K(_e=>{j(re,` ${i[0].id??""}`),j(oe,` ${i[0].type??""}`),j(H,` Row ${i[0].position.row??""}, Col ${i[0].position.column??""}`),j(ae,`${i[0].id??""}:`),j(ie,_e)},[()=>i[0].keyBinding&&i[0].keyBinding.startsWith("macro:")?P(i[0].keyBinding.replace("macro:","")):i[0].keyBinding||"None"],Ce),d(O,R)},z=O=>{var R=to();d(O,R)};I(T,O=>{i.length>0?O(G):O(z,!1)},!0)}d(M,N)};I(S,M=>{s(v)?M(U):M(Z,!1)})}var Y=g(E,2),A=f(Y);A.textContent=n;var W=g(A,2);W.textContent=a;var X=g(W,2);Ne(X,5,()=>i,Ae,(M,N)=>{var T=F(),G=q(T);{var z=R=>{var V=ao(),te=f(V);{var re=L=>{var H=ro();d(L,H)};I(te,L=>{s(l)[s(N).id]&&L(re)})}var ue=g(te,2);{var oe=L=>{var H=no();d(L,H)};I(ue,L=>{s(_)[s(N).id]&&L(oe)})}K((L,H)=>{He(V,zr(L),"svelte-1uxp99e"),ht(V,"style",`
                grid-area: ${s(N).position.row+1} / ${s(N).position.column+1} / span ${s(N).size.rows??""} / span ${s(N).size.columns??""};
              `),ht(V,"title",H)},[()=>B(s(N)),()=>s(l)[s(N).id]?`Macro: ${P(s(l)[s(N).id])}`:""],Ce),J("click",V,()=>x(s(N))),d(R,V)},O=R=>{var V=io(),te=f(V);{var re=L=>{var H=so();d(L,H)};I(te,L=>{s(l)[s(N).id]&&L(re)})}var ue=g(te,2);{var oe=L=>{var H=oo();d(L,H)};I(ue,L=>{s(_)[s(N).id]&&L(oe)})}K((L,H)=>{He(V,zr(L),"svelte-1uxp99e"),ht(V,"style",`grid-column: ${s(N).position.column+1}; grid-row: ${s(N).position.row+1}`),ht(V,"title",H)},[()=>B(s(N)),()=>s(l)[s(N).id]?`Macro: ${P(s(l)[s(N).id])}`:""],Ce),J("click",V,()=>x(s(N))),d(R,V)};I(G,R=>{s(N).size?R(z):R(O,!1)})}d(M,T)});var ce=g(h,2);{var se=M=>{var N=co(),T=g(f(N),2);Ne(T,5,()=>Object.entries(s(_)),Ae,(z,O)=>{let R=()=>s(O)[0],V=()=>s(O)[1];var te=lo(),re=f(te),ue=f(re),oe=g(re,2),L=f(oe),H=f(L),ve=g(L,4),ee=f(ve);K(Q=>{j(ue,`${R()??""}:`),j(H,Q),j(ee,V().macroName||V().macroId)},[()=>(()=>{const Q=i.find(ae=>ae.id===R());if(Q&&Q.keyBinding&&Q.keyBinding.startsWith("macro:")){const ae=Q.keyBinding.replace("macro:","");return P(ae)||ae}return"None"})()],Ce),d(z,te)});var G=g(T,4);J("click",G,b),d(M,N)};I(ce,M=>{Object.keys(s(_)).length>0&&M(se)})}return K(()=>ht(X,"style",`grid-template-columns: repeat(${o.columns??""}, 40px); grid-template-rows: repeat(${o.rows??""}, 40px)`)),d(e,w),ln(t,"setPendingChange",D),ln(t,"clearPendingChanges",m),Ve({setPendingChange:D,clearPendingChanges:m})}var fo=$('<div class="module-container svelte-1pddc1k"><!></div>'),po=$('<div class="macropad-view svelte-1pddc1k"></div>');function _o(e,t){let r=Be(t,"modules",8);var a=po();Ne(a,5,r,Ae,(n,o)=>{var i=fo(),l=f(i);vo(l,{get moduleInfo(){return s(o)}}),d(n,i)}),d(e,a)}var go=$('<button class="svelte-4yxp50"><!> <span> </span></button>'),mo=$('<div class="encoder-options svelte-4yxp50"><div class="direction-toggle svelte-4yxp50"><button class="svelte-4yxp50"><!> <span>Left</span></button> <button class="svelte-4yxp50"><!> <span>Right</span></button></div> <div class="speed-slider svelte-4yxp50"><!> <input type="range" min="0" max="100" class="svelte-4yxp50"> <!> <span class="speed-value svelte-4yxp50"> </span></div> <div class="actions-grid svelte-4yxp50"></div></div>');function bo(e){let t=ne("right"),r=ne(50),a=ne(null);const n=[{key:"Arrow Left",icon:Pr},{key:"Arrow Right",icon:Tr},{key:"Arrow Up",icon:Gn},{key:"Arrow Down",icon:Jn},{key:"Brightness Up",icon:Xn},{key:"Brightness Down",icon:Zn},{key:"Volume Up",icon:Qn},{key:"Volume Down",icon:Dr}];function o(w){y(t,w)}function i(w){y(r,parseInt(w.target.value))}function l(w){y(a,w)}var u=mo(),c=f(u),_=f(c),v=f(_);Pr(v,{size:"20"});var p=g(_,2),k=f(p);Tr(k,{size:"20"});var x=g(c,2),P=f(x);Is(P,{size:"16",title:"Slow"});var B=g(P,2),D=g(B,2);Ks(D,{size:"16",title:"Fast"});var C=g(D,2),m=f(C),b=g(x,2);Ne(b,5,()=>n,Ae,(w,h)=>{var E=go(),S=f(E);Un(S,()=>s(h).icon,(Y,A)=>{A(Y,{size:"20"})});var U=g(S,2),Z=f(U);K(()=>{yr(E,"selected",s(a)&&s(a).key===s(h).key),j(Z,s(h).key)}),J("click",E,()=>l(s(h))),d(w,E)}),K(()=>{yr(_,"selected",s(t)==="left"),yr(p,"selected",s(t)==="right"),j(m,s(r))}),J("click",_,()=>o("left")),J("click",p,()=>o("right")),Mt(B,()=>s(r),w=>y(r,w)),J("input",B,i),d(e,u)}var ho=$('<button class="keyboard-key svelte-1jicinv"><!></button>'),yo=$('<div class="keyboard-row svelte-1jicinv"></div>'),xo=$('<div class="keyboard-container svelte-1jicinv"></div>');function wo(e,t){je(t,!1);let r=Be(t,"selectedKey",8),a=Be(t,"assignKey",8);const n=[[{key:"Volume Up",size:1},{key:"Volume Down",size:1},{key:"Mute",size:1},{key:"Play/Pause",size:1},{key:"Stop",size:1}],[{key:"Next Track",size:1},{key:"Previous Track",size:1},{key:"Brightness Up",size:1},{key:"Brightness Down",size:1}],[{key:"Print Screen",size:1},{key:"Scroll Lock",size:1},{key:"Pause/Break",size:1}],[{key:"Insert",size:1},{key:"Home",size:1},{key:"End",size:1},{key:"Page Up",size:1},{key:"Page Down",size:1}],[{key:"Left Arrow",size:1},{key:"Right Arrow",size:1},{key:"Up Arrow",size:1},{key:"Down Arrow",size:1}]],o={"Volume Up":Qn,"Volume Down":Dr,Mute:Dr,"Play/Pause":Fs,Stop:Bs,"Next Track":Us,"Previous Track":Vs,"Brightness Up":Xn,"Brightness Down":Zn,"Print Screen":Ws,"Scroll Lock":null,"Pause/Break":null,Insert:null,Home:null,End:null,"Page Up":null,"Page Down":null,"Left Arrow":Pr,"Right Arrow":Tr,"Up Arrow":Gn,"Down Arrow":Jn};et();var i=xo();Ne(i,5,()=>n,Ae,(l,u)=>{var c=yo();Ne(c,5,()=>s(u),Ae,(_,v)=>{var p=ho(),k=f(p);{var x=B=>{var D=F(),C=q(D);Un(C,()=>o[s(v).key],(m,b)=>{b(m,{size:"16"})}),d(B,D)},P=B=>{var D=Ke();K(()=>j(D,s(v).key)),d(B,D)};I(k,B=>{o[s(v).key]?B(x):B(P,!1)})}K(()=>ht(p,"style",`flex: ${s(v).size??""}`)),J("click",p,()=>a()(r(),s(v).key)),d(_,p)}),d(l,c)}),d(e,i),Ve()}var ko=$('<div class="error-message svelte-lqtpp9"> </div>'),$o=$('<div class="loading svelte-lqtpp9">Loading macros...</div>'),Eo=$('<div class="no-selection svelte-lqtpp9"><p>Select a key on the grid to assign a macro</p></div>'),Co=$('<div class="current-assignment svelte-lqtpp9"><h4 class="svelte-lqtpp9">Current Assignment</h4> <p> </p> <p> </p> <div class="actions svelte-lqtpp9"><button class="button button-secondary svelte-lqtpp9">Test Macro</button> <button class="button button-danger svelte-lqtpp9">Remove Assignment</button></div></div>'),So=$("<p>No macro currently assigned</p>"),Mo=$("<p>No macros available. Create some first!</p>"),Ao=$('<li><div class="macro-item svelte-lqtpp9"><div class="macro-info"><strong> </strong> <span class="macro-id svelte-lqtpp9"> </span></div> <div class="macro-actions svelte-lqtpp9"><button class="button button-small svelte-lqtpp9">Assign</button> <button class="button button-small button-secondary svelte-lqtpp9">Preview</button></div></div></li>'),No=$('<ul class="svelte-lqtpp9"></ul>'),zo=$('<div class="editor-content svelte-lqtpp9"><h3 class="svelte-lqtpp9"> </h3> <!> <div class="macro-list svelte-lqtpp9"><h4 class="svelte-lqtpp9">Available Macros</h4> <!></div> <div class="pending-actions svelte-lqtpp9"><button class="button button-secondary svelte-lqtpp9">Cancel All Changes</button> <button class="button svelte-lqtpp9"> </button></div></div>'),Po=$('<div class="macro-editor svelte-lqtpp9"><h2 class="svelte-lqtpp9">Macro Editor</h2> <!> <!></div>');function To(e,t){je(t,!1);const r=ne(),a=ne();let n=ne([]),o=ne(!0),i=ne(null),l=!1,u=ne(!1),c=null;const _=Yt.subscribe(A=>{y(u,A.loading),A.error&&y(i,`Failed to save configuration: ${A.error}`)}),v=ye.subscribe(A=>{l=A.connected});zt(async()=>{try{y(o,!0),y(n,await yt.fetchAll()),y(o,!1),setTimeout(()=>{const A=document.querySelector(".module-container");A&&A.__svelte&&(c=A.__svelte,console.log("Module component found:",c))},500)}catch(A){y(i,A.message||"Failed to load macros"),y(o,!1)}return()=>{v(),_()}});function p(){var A,W,X,ce;return(ce=(X=(W=(A=document.querySelector(".macropad-view"))==null?void 0:A.parentNode)==null?void 0:W.__svelte)==null?void 0:X.ctx)==null?void 0:ce.get(0)}function k(A){const W=p();if(!W)return null;for(const X of W)for(const ce of X.components)if(ce.id===A)return ce;return null}function x(A){if(!A)return null;const W=k(A);if(!W||!W.keyBinding||!W.keyBinding.startsWith("macro:"))return null;const X=W.keyBinding.replace("macro:","");return s(n).length?s(n).find(se=>se.id===X)||null:{id:X,name:"Loading..."}}async function P(){const A=p();if(!A)return alert("Could not access module configuration. Please try again."),!1;try{return l?await Yt.saveConfigWs(A):await Yt.saveConfig(A),c&&c.clearPendingChanges(),!0}catch(W){return y(i,W.message||"Failed to save configuration"),!1}}async function B(A){if(s(r)){const W=k(s(r));if(W){if(c&&c.setPendingChange(s(r),A),W.keyBinding=`macro:${A}`,await P()){m();const ce=s(n).find(se=>se.id===A);ce&&alert(`Macro "${ce.name}" successfully assigned to component ${s(r)}`)}}else alert(`Component ${s(r)} not found in any module`)}}async function D(){if(s(r)){const A=k(s(r));if(A&&A.keyBinding&&A.keyBinding.startsWith("macro:")){c&&c.setPendingChange(s(r),null);const W=A.keyBinding;A.keyBinding="",await P()?(m(),alert(`Macro assignment removed from component ${s(r)}`)):A.keyBinding=W}else alert(`Component ${s(r)} does not have a macro assigned`)}}async function C(A){try{await yt.executeMacro(A),alert("Macro executed successfully")}catch(W){y(i,W.message||"Failed to execute macro")}}function m(){var W,X,ce,se;const A=p();if(A){const M=[...A];(se=(ce=(X=(W=document.querySelector(".macropad-view"))==null?void 0:W.parentNode)==null?void 0:X.__svelte)==null?void 0:ce.ctx)==null||se.set(0,M)}}function b(A){s(r)&&c&&c.setPendingChange(s(r),A)}function w(){c&&c.clearPendingChanges()}Qr(()=>St,()=>{y(r,St.selectedComponent)}),Qr(()=>s(r),()=>{y(a,x(s(r)))}),Ba(),et();var h=Po(),E=g(f(h),2);{var S=A=>{var W=ko(),X=f(W);K(()=>j(X,s(i))),d(A,W)};I(E,A=>{s(i)&&A(S)})}var U=g(E,2);{var Z=A=>{var W=$o();d(A,W)},Y=A=>{var W=F(),X=q(W);{var ce=M=>{var N=Eo();d(M,N)},se=M=>{var N=zo(),T=f(N),G=f(T),z=g(T,2);{var O=ee=>{var Q=Co(),ae=g(f(Q),2),fe=f(ae),ie=g(ae,2),_e=f(ie),le=g(ie,2),de=f(le),pe=g(de,2);K(()=>{j(fe,`Macro: ${s(a).name??""}`),j(_e,`ID: ${s(a).id??""}`),de.disabled=s(u),pe.disabled=s(u)}),J("click",de,()=>C(s(a).id)),J("click",pe,D),d(ee,Q)},R=ee=>{var Q=So();d(ee,Q)};I(z,ee=>{s(a)?ee(O):ee(R,!1)})}var V=g(z,2),te=g(f(V),2);{var re=ee=>{var Q=Mo();d(ee,Q)},ue=ee=>{var Q=No();Ne(Q,5,()=>s(n),Ae,(ae,fe)=>{var ie=Ao(),_e=f(ie),le=f(_e),de=f(le),pe=f(de),xe=g(de,2),ze=f(xe),we=g(le,2),he=f(we),qe=g(he,2);K(()=>{j(pe,s(fe).name),j(ze,s(fe).id),he.disabled=s(u)}),J("click",he,()=>B(s(fe).id)),J("click",qe,()=>b(s(fe).id)),d(ae,ie)}),d(ee,Q)};I(te,ee=>{s(n).length===0?ee(re):ee(ue,!1)})}var oe=g(V,2),L=f(oe),H=g(L,2),ve=f(H);K(()=>{j(G,`Selected Component: ${s(r)??""}`),H.disabled=s(u),j(ve,s(u)?"Saving...":"Save All Changes")}),J("click",L,w),J("click",H,P),d(M,N)};I(X,M=>{s(r)?M(se,!1):M(ce)},!0)}d(A,W)};I(U,A=>{s(o)?A(Z):A(Y,!1)})}d(e,h),Ve()}var Do=$('<button class="keyboard-key svelte-1bc1pux"> </button>'),Bo=$('<div class="keyboard-row svelte-1bc1pux"></div>'),Io=$('<div class="keyboard-container svelte-1bc1pux"></div>');function qo(e,t){je(t,!1);let r=Be(t,"selectedKey",8),a=Be(t,"assignKey",8);const n=[[{key:"Esc",size:1},{key:"1",size:1},{key:"2",size:1},{key:"3",size:1},{key:"4",size:1},{key:"5",size:1},{key:"6",size:1},{key:"7",size:1},{key:"8",size:1},{key:"9",size:1},{key:"0",size:1},{key:"-",size:1},{key:"=",size:1},{key:"Backspace",size:2}],[{key:"Tab",size:1.5},{key:"Q",size:1},{key:"W",size:1},{key:"E",size:1},{key:"R",size:1},{key:"T",size:1},{key:"Y",size:1},{key:"U",size:1},{key:"I",size:1},{key:"O",size:1},{key:"P",size:1},{key:"[",size:1},{key:"]",size:1},{key:"\\",size:1.5}],[{key:"Caps",size:1.75},{key:"A",size:1},{key:"S",size:1},{key:"D",size:1},{key:"F",size:1},{key:"G",size:1},{key:"H",size:1},{key:"J",size:1},{key:"K",size:1},{key:"L",size:1},{key:";",size:1},{key:"'",size:1},{key:"Enter",size:2.25}],[{key:"Shift",size:2.25},{key:"Z",size:1},{key:"X",size:1},{key:"C",size:1},{key:"V",size:1},{key:"B",size:1},{key:"N",size:1},{key:"M",size:1},{key:",",size:1},{key:".",size:1},{key:"/",size:1},{key:"Shift",size:2.75}],[{key:"Ctrl",size:1.25},{key:"Alt",size:1.25},{key:"Space",size:6.25},{key:"Alt",size:1.25},{key:"Fn",size:1.25},{key:"Ctrl",size:1.25}]];et();var o=Io();Ne(o,5,()=>n,Ae,(i,l)=>{var u=Bo();Ne(u,5,()=>s(l),Ae,(c,_)=>{var v=Do(),p=f(v);K(()=>{ht(v,"style",`flex: ${s(_).size??""}`),j(p,s(_).key)}),J("click",v,()=>a()(r(),s(_).key)),d(c,v)}),d(i,u)}),d(e,o),Ve()}var Oo=$(" <button> </button>",1),Ro=$('<div class="basic-options"><!></div>'),Lo=$('<div class="extended-options"><!></div>'),Fo=$('<div class="macro-options"><!></div>'),Wo=$('<div class="display-options"><!></div>'),jo=$('<div class="encoder-options"><!></div>'),Vo=$('<div class="nav-tabs svelte-aaksxd"></div> <div class="tab-content svelte-aaksxd"><!></div>',1),Uo=$('<div class="no-selection svelte-aaksxd">Select a component to view options</div>'),Ko=$('<nav class="macropad-options svelte-aaksxd"><!></nav>');function Ho(e,t){je(t,!0);const r={button:["Basic","Extended","Macros"],display:["Display"],encoder:["Encoder"],"encoder-btn":["Basic","Extended","Macros","Encoder"]};let a=Ot(()=>r[St.selectedComponentType]||[]),n=$r("");function o(v){y(n,it(v))}async function i(v,p){var k,x,P,B,D,C,m,b;if(v)try{const w=(B=(P=(x=(k=document.querySelector(".macropad-view"))==null?void 0:k.parentNode)==null?void 0:x.__svelte)==null?void 0:P.ctx)==null?void 0:B.get(0);if(!w||!w.length)return;const h=w[0],E=h.components.find(U=>U.id===v);if(!E)return;E.keyBinding=p,await Yt.saveConfigWs([h]);const S=[...w];(b=(m=(C=(D=document.querySelector(".macropad-view"))==null?void 0:D.parentNode)==null?void 0:C.__svelte)==null?void 0:m.ctx)==null||b.set(0,S)}catch(w){console.error("Failed to assign key:",w)}}var l=Ko(),u=f(l);{var c=v=>{var p=Vo(),k=q(p);Ne(k,21,()=>s(a),Ae,(C,m)=>{var b=Oo(),w=q(b),h=g(w),E=f(h);K(S=>{j(w,`${S??""} `),He(h,`nav-tab ${(s(n)===s(m)?"active":"")??""} svelte-aaksxd`),j(E,s(m))},[()=>console.log(s(m))]),J("click",h,()=>o(s(m))),d(C,b)});var x=g(k,2),P=f(x);{var B=C=>{var m=Ro(),b=f(m);qo(b,{get selectedKey(){return St.selectedComponent},assignKey:i}),d(C,m)},D=C=>{var m=F(),b=q(m);{var w=E=>{var S=Lo(),U=f(S);wo(U,{get selectedKey(){return St.selectedComponent},assignKey:i}),d(E,S)},h=E=>{var S=F(),U=q(S);{var Z=A=>{var W=Fo(),X=f(W);To(X,{}),d(A,W)},Y=A=>{var W=F(),X=q(W);{var ce=M=>{var N=Wo();d(M,N)},se=M=>{var N=F(),T=q(N);{var G=z=>{var O=jo(),R=f(O);bo(R),d(z,O)};I(T,z=>{s(n)==="Encoder"&&z(G)},!0)}d(M,N)};I(X,M=>{s(n)==="Display"?M(ce):M(se,!1)},!0)}d(A,W)};I(U,A=>{s(n)==="Macros"?A(Z):A(Y,!1)},!0)}d(E,S)};I(b,E=>{s(n)==="Extended"?E(w):E(h,!1)},!0)}d(C,m)};I(P,C=>{s(n)==="Basic"?C(B):C(D,!1)})}d(v,p)},_=v=>{var p=Uo();d(v,p)};I(u,v=>{St.selectedComponentType?v(c):v(_,!1)})}d(e,l),Ve()}var Yo=$('<div class="loading svelte-1rv5qbb">Loading component configuration...</div>'),Jo=$('<div class="error svelte-1rv5qbb"><p> </p> <p>Using fallback configuration instead.</p></div>'),Go=$('<div class="container svelte-1rv5qbb"><!> <div class="top-section svelte-1rv5qbb"><!></div> <div class="bottom-section svelte-1rv5qbb"><!></div></div>');function Zo(e,t){je(t,!1);let r={id:"main-module",name:"Main Module",description:"This is the main module with buttons and controls.",gridSize:{rows:5,columns:5},components:[]},a=ne([r]),n=ne(!0),o=ne(null);zt(async()=>{try{y(n,!0);const m=ye.subscribe(b=>{b.events&&b.events.length>0&&i(b.events)});return await ye.requestConfig("components"),await ye.requestAllConfigs(),y(n,!1),m}catch(m){console.error("Failed to load component data:",m),y(o,m.message||"Failed to load component data"),y(n,!1),_()}});function i(m){const b=m.find(h=>h.configType==="components"&&h.data||h.data&&h.data.components);if(b){const h=b.data||{};if(console.log("Received component data:",h),h.components&&h.components.length)u(h.components);else if(h.buttons||h.displays||h.encoders){const E=[];h.buttons&&h.buttons.length&&h.buttons.forEach((S,U)=>{typeof S=="string"?E.push({id:S,type:"button",position:l("button",U),keyBinding:null}):E.push(S)}),h.displays&&h.displays.length&&h.displays.forEach((S,U)=>{typeof S=="string"?E.push({id:S,type:"display",position:l("display",U),size:{rows:2,columns:3},keyBinding:null}):E.push(S)}),h.encoders&&h.encoders.length&&h.encoders.forEach((S,U)=>{if(typeof S=="string"){const Z=S.includes("button")||S.includes("btn");let Y;Z?Y=`enc-btn-${U+1}`:Y=`enc-${U+1}`,E.push({id:Y,type:Z?"encoder-btn":"encoder",position:l("encoder",U),keyBinding:null})}else{const Z=S.type==="encoder-btn"||S.withButton===!0||typeof S.id=="string"&&(S.id.includes("button")||S.id.includes("btn"));let Y;Z?Y=`enc-btn-${U+1}`:Y=`enc-${U+1}`,E.push({...S,id:Y,type:Z?"encoder-btn":"encoder"})}}),u(E)}else _()}const w=m.find(h=>h.key_bindings||h.data&&h.data.key_bindings);w&&c(w)}function l(m,b){if(m==="display")return{row:0,column:0};if(m==="encoder")return{row:0,column:4};if(m==="button"){const w=Math.floor(b/5)+1,h=b%5;return{row:w,column:h}}return{row:0,column:0}}function u(m){y(a,[{...r,components:m.map(b=>{let w=b.id,h=b.type;return w.startsWith("button-")&&(w=w.replace("button-","btn-")),(w.startsWith("rotary-")||w.startsWith("encoder-"))&&(h==="encoder-btn"||w.includes("btn")||b.withButton===!0?(w=w.replace(/^(rotary-|encoder-)(.+)$/,(S,U,Z)=>`enc-btn-${Z.replace(/\D/g,"")}`),h="encoder-btn"):(w=w.replace(/^(rotary-|encoder-)(.+)$/,(S,U,Z)=>`enc-${Z.replace(/\D/g,"")}`),h="encoder")),{...b,id:w,type:h,keyBinding:b.keyBinding||null}})}]),console.log("Updated modules with components:",s(a))}function c(m){const b=m.key_bindings||m.data&&m.data.key_bindings||[];if(b.length&&s(a)[0].components.length){const w={};b.forEach(h=>{if(h.component_id&&h.macro_id){let E=h.component_id;E.startsWith("button-")?E=E.replace("button-","btn-"):isNaN(parseInt(E))||(E=`btn-${parseInt(E)+1}`),w[E]=h.macro_id}}),y(a,s(a).map(h=>({...h,components:h.components.map(E=>w[E.id]?{...E,keyBinding:`macro:${w[E.id]}`}:E)}))),console.log("Updated modules with bindings:",s(a))}}function _(){const m=[];m.push({id:"display-1",type:"display",position:{row:0,column:0},size:{rows:2,columns:3},keyBinding:null}),m.push({id:"enc-btn-1",type:"encoder-btn",position:{row:0,column:4},keyBinding:null});for(let b=0;b<18;b++){const w=l("button",b);m.push({id:`btn-${b+1}`,type:"button",position:w,keyBinding:null})}y(a,[{...r,components:m}]),console.log("Generated fallback components:",s(a))}et();var v=Go(),p=f(v);{var k=m=>{var b=Yo();d(m,b)},x=m=>{var b=F(),w=q(b);{var h=E=>{var S=Jo(),U=f(S),Z=f(U);K(()=>j(Z,`Error loading components: ${s(o)??""}`)),d(E,S)};I(w,E=>{s(o)&&E(h)},!0)}d(m,b)};I(p,m=>{s(n)?m(k):m(x,!1)})}var P=g(p,2),B=f(P);_o(B,{get modules(){return s(a)}});var D=g(P,2),C=f(D);Ho(C,{}),d(e,v),Ve()}var Xo=$('<div class="lightings-tab-container svelte-1iq6ddv"><!> <!></div>');function Qo(e){let t=ne(null);var r=Xo(),a=f(r);LightingsDisplay(a,{get selectedLED(){return s(t)},set selectedLED(o){y(t,o)},$$legacy:!0});var n=g(a,2);LightingsEditor(n,{get selectedLED(){return s(t)}}),d(e,r)}var ei=$('<div><label class="block text-xs text-gray-500 mb-1"></label> <input type="text" class="w-full p-1 border border-gray-300 rounded"></div>'),ti=$('<button class="px-2 py-1 text-xs bg-white border border-gray-300 rounded shadow-sm hover:bg-gray-50"> </button>'),ri=$('<div class="mb-4"><label class="block text-sm font-medium text-gray-700 mb-2">Key Report (HID Keyboard Report)</label> <div class="grid grid-cols-4 gap-2 mb-3"></div> <div class="bg-gray-100 p-3 rounded-md"><h3 class="text-sm font-medium mb-2">Common Keys</h3> <div class="flex flex-wrap gap-2"></div> <p class="text-xs text-gray-500 mt-2">Byte 0: Modifiers, Byte 2: Key code</p></div></div>'),ni=$('<div><label class="block text-xs text-gray-500 mb-1"></label> <input type="text" class="w-full p-1 border border-gray-300 rounded"></div>'),ai=$('<button class="px-2 py-1 text-xs bg-white border border-gray-300 rounded shadow-sm hover:bg-gray-50"> </button>'),si=$('<div class="mb-4"><label class="block text-sm font-medium text-gray-700 mb-2">Consumer Report</label> <div class="grid grid-cols-4 gap-2 mb-3"></div> <div class="bg-gray-100 p-3 rounded-md"><h3 class="text-sm font-medium mb-2">Common Consumer Controls</h3> <div class="flex flex-wrap gap-2"></div></div></div>'),oi=$('<div class="mb-4"><label class="block text-sm font-medium text-gray-700 mb-1" for="delay-ms">Delay (milliseconds)</label> <input id="delay-ms" type="number" min="1" max="10000" class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"> <p class="text-xs text-gray-500 mt-1">Delay between 1 and 10000 milliseconds</p></div>'),ii=$('<div class="mb-4"><label class="block text-sm font-medium text-gray-700 mb-1" for="text-content">Text to Type</label> <textarea id="text-content" class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" rows="3"></textarea></div>'),li=$('<div class="mb-4"><label class="block text-sm font-medium text-gray-700 mb-1" for="target-macro">Target Macro ID</label> <input id="target-macro" type="text" class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" placeholder="Enter the ID of the macro to execute"> <p class="text-xs text-gray-500 mt-1">This will execute another macro as part of this sequence</p></div>'),ci=$('<span class="text-xs text-gray-500 ml-2"> </span>'),ui=$('<span class="text-xs text-gray-500 ml-2"> </span>'),di=$('<span class="text-xs text-gray-500 ml-2"> </span>'),vi=$('<span class="text-xs text-gray-500 ml-2"> </span>'),fi=$('<span class="text-xs text-gray-500 ml-2"> </span>'),pi=$('<li class="p-3 flex justify-between items-center hover:bg-gray-50"><div><span class="font-medium"> </span> <!></div> <button class="text-red-500 hover:text-red-700">×</button></li>'),_i=$('<div class="mt-6"><h3 class="font-medium mb-2">Command Sequence</h3> <ul class="border rounded-md divide-y"></ul></div>'),gi=$('<div class="command-editor"><div class="mb-4"><label class="block text-sm font-medium text-gray-700 mb-1" for="command-type">Command Type</label> <select id="command-type" class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"><option>Key Press (press and release)</option><option>Key Down (press and hold)</option><option>Key Up (release all keys)</option><option>Consumer Control</option><option>Delay</option><option>Type Text</option><option>Execute Macro</option></select></div> <!> <div class="flex justify-end"><button class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 disabled:bg-gray-300">Add Command</button></div> <!></div>');function mi(e,t){je(t,!1);let r=Be(t,"commands",28,()=>[]);const a=Ns();let n=ne("key_press"),o=ne(new Array(8).fill(0)),i=ne(new Array(4).fill(0)),l=ne(100),u=ne(""),c=ne("");function _(){let T;switch(s(n)){case"key_press":T={type:"key_press",report:[...s(o)]};break;case"key_down":T={type:"key_down",report:[...s(o)]};break;case"key_up":T={type:"key_up"};break;case"consumer_press":T={type:"consumer_press",report:[...s(i)]};break;case"delay":T={type:"delay",ms:s(l)};break;case"type_text":T={type:"type_text",text:s(u)};break;case"execute_macro":T={type:"execute_macro",macro_id:s(c)};break}T&&(r([...r(),T]),a("update",{commands:r()}),p())}function v(T){r(r().filter((G,z)=>z!==T)),a("update",{commands:r()})}function p(){switch(s(n)){case"key_press":case"key_down":y(o,new Array(8).fill(0));break;case"consumer_press":y(i,new Array(4).fill(0));break;case"delay":y(l,100);break;case"type_text":y(u,"");break;case"execute_macro":y(c,"");break}}function k(T,G,z=!0){let O;try{G.startsWith("0x")?O=parseInt(G.substring(2),16):O=parseInt(G,16)}catch{return}isNaN(O)||O<0||O>255||(z?(Pe(o,s(o)[T]=O),y(o,[...s(o)])):(Pe(i,s(i)[T]=O),y(i,[...s(i)])))}const x=[{name:"A",code:"0x04"},{name:"B",code:"0x05"},{name:"C",code:"0x06"},{name:"D",code:"0x07"},{name:"Ctrl",code:"0xE0"},{name:"Shift",code:"0xE1"},{name:"Alt",code:"0xE2"},{name:"Enter",code:"0x28"},{name:"Esc",code:"0x29"},{name:"Backspace",code:"0x2A"},{name:"Tab",code:"0x2B"},{name:"Space",code:"0x2C"}],P=[{name:"Play/Pause",code:"0xCD"},{name:"Mute",code:"0xE2"},{name:"Volume Up",code:"0xE9"},{name:"Volume Down",code:"0xEA"},{name:"Media Next",code:"0xB5"},{name:"Media Previous",code:"0xB6"}];function B(T){y(o,new Array(8).fill(0)),T==="0xE0"||T==="0xE1"||T==="0xE2"?Pe(o,s(o)[0]=parseInt(T.substring(2),16)):Pe(o,s(o)[2]=parseInt(T.substring(2),16)),y(o,[...s(o)])}function D(T){y(i,new Array(4).fill(0)),Pe(i,s(i)[0]=parseInt(T.substring(2),16)),y(i,[...s(i)])}et();var C=gi(),m=f(C),b=g(f(m),2);K(()=>{s(n),Ja(()=>{})});var w=f(b);w.value=(w.__value="key_press")==null?"":"key_press";var h=g(w);h.value=(h.__value="key_down")==null?"":"key_down";var E=g(h);E.value=(E.__value="key_up")==null?"":"key_up";var S=g(E);S.value=(S.__value="consumer_press")==null?"":"consumer_press";var U=g(S);U.value=(U.__value="delay")==null?"":"delay";var Z=g(U);Z.value=(Z.__value="type_text")==null?"":"type_text";var Y=g(Z);Y.value=(Y.__value="execute_macro")==null?"":"execute_macro";var A=g(m,2);{var W=T=>{var G=ri(),z=g(f(G),2);Ne(z,5,()=>s(o),Ae,(V,te,re)=>{var ue=ei(),oe=f(ue);oe.textContent=`Byte ${re??""}`;var L=g(oe,2);K(H=>an(L,H),[()=>`0x${s(te).toString(16).padStart(2,"0").toUpperCase()}`],Ce),J("change",L,H=>k(re,H.target.value,!0)),d(V,ue)});var O=g(z,2),R=g(f(O),2);Ne(R,5,()=>x,Ae,(V,te)=>{var re=ti(),ue=f(re);K(()=>j(ue,s(te).name)),J("click",re,()=>B(s(te).code)),d(V,re)}),d(T,G)},X=T=>{var G=F(),z=q(G);{var O=V=>{var te=si(),re=g(f(te),2);Ne(re,5,()=>s(i),Ae,(L,H,ve)=>{var ee=ni(),Q=f(ee);Q.textContent=`Byte ${ve??""}`;var ae=g(Q,2);K(fe=>an(ae,fe),[()=>`0x${s(H).toString(16).padStart(2,"0").toUpperCase()}`],Ce),J("change",ae,fe=>k(ve,fe.target.value,!1)),d(L,ee)});var ue=g(re,2),oe=g(f(ue),2);Ne(oe,5,()=>P,Ae,(L,H)=>{var ve=ai(),ee=f(ve);K(()=>j(ee,s(H).name)),J("click",ve,()=>D(s(H).code)),d(L,ve)}),d(V,te)},R=V=>{var te=F(),re=q(te);{var ue=L=>{var H=oi(),ve=g(f(H),2);Mt(ve,()=>s(l),ee=>y(l,ee)),d(L,H)},oe=L=>{var H=F(),ve=q(H);{var ee=ae=>{var fe=ii(),ie=g(f(fe),2);Mt(ie,()=>s(u),_e=>y(u,_e)),d(ae,fe)},Q=ae=>{var fe=F(),ie=q(fe);{var _e=le=>{var de=li(),pe=g(f(de),2);Mt(pe,()=>s(c),xe=>y(c,xe)),d(le,de)};I(ie,le=>{s(n)==="execute_macro"&&le(_e)},!0)}d(ae,fe)};I(ve,ae=>{s(n)==="type_text"?ae(ee):ae(Q,!1)},!0)}d(L,H)};I(re,L=>{s(n)==="delay"?L(ue):L(oe,!1)},!0)}d(V,te)};I(z,V=>{s(n)==="consumer_press"?V(O):V(R,!1)},!0)}d(T,G)};I(A,T=>{s(n)==="key_press"||s(n)==="key_down"?T(W):T(X,!1)})}var ce=g(A,2),se=f(ce),M=g(ce,2);{var N=T=>{var G=_i(),z=g(f(G),2);Ne(z,5,r,Ae,(O,R,V)=>{var te=pi(),re=f(te),ue=f(re),oe=f(ue),L=g(ue,2);{var H=Q=>{var ae=ci(),fe=f(ae);K(ie=>j(fe,`[${ie??""}]`),[()=>s(R).report.map(ie=>"0x"+ie.toString(16).padStart(2,"0").toUpperCase()).join(" ")],Ce),d(Q,ae)},ve=Q=>{var ae=F(),fe=q(ae);{var ie=le=>{var de=ui(),pe=f(de);K(xe=>j(pe,`[${xe??""}]`),[()=>s(R).report.map(xe=>"0x"+xe.toString(16).padStart(2,"0").toUpperCase()).join(" ")],Ce),d(le,de)},_e=le=>{var de=F(),pe=q(de);{var xe=we=>{var he=di(),qe=f(he);K(()=>j(qe,`${s(R).ms??""}ms`)),d(we,he)},ze=we=>{var he=F(),qe=q(he);{var nt=Ue=>{var ke=vi(),Oe=f(ke);K(()=>j(Oe,`"${s(R).text??""}"`)),d(Ue,ke)},pt=Ue=>{var ke=F(),Oe=q(ke);{var _t=at=>{var gt=fi(),Te=f(gt);K(()=>j(Te,`macro_id: ${s(R).macro_id??""}`)),d(at,gt)};I(Oe,at=>{s(R).type==="execute_macro"&&at(_t)},!0)}d(Ue,ke)};I(qe,Ue=>{s(R).type==="type_text"?Ue(nt):Ue(pt,!1)},!0)}d(we,he)};I(pe,we=>{s(R).type==="delay"?we(xe):we(ze,!1)},!0)}d(le,de)};I(fe,le=>{s(R).type==="consumer_press"?le(ie):le(_e,!1)},!0)}d(Q,ae)};I(L,Q=>{s(R).type==="key_press"||s(R).type==="key_down"?Q(H):Q(ve,!1)})}var ee=g(re,2);K(()=>j(oe,s(R).type)),J("click",ee,()=>v(V)),d(O,te)}),d(T,G)};I(M,T=>{r().length>0&&T(N)})}K(()=>se.disabled=s(n)==="type_text"&&!s(u)||s(n)==="execute_macro"&&!s(c)),xs(b,()=>s(n),T=>y(n,T)),J("click",se,_),d(e,C),Ve()}var bi=$('<div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4"><strong>Error:</strong> <button class="float-right font-bold">×</button></div>'),hi=$('<div class="bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded mb-4"><strong>Notice:</strong> Not connected to the device. Macro execution will not work until connection is established. <button class="ml-2 px-2 py-1 bg-yellow-500 text-white rounded text-xs hover:bg-yellow-600">Reconnect</button></div>'),yi=$('<div class="flex justify-center py-8"><div class="animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-blue-500"></div></div>'),xi=$('<div class="bg-white shadow rounded-lg p-6"><h3 class="text-lg font-medium mb-4"> </h3> <div class="mb-4"><label class="block text-sm font-medium text-gray-700 mb-1" for="macro-id">ID</label> <input id="macro-id" type="text" class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" placeholder="Unique identifier (no spaces, lowercase)"></div> <div class="mb-4"><label class="block text-sm font-medium text-gray-700 mb-1" for="macro-name">Name</label> <input id="macro-name" type="text" class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" placeholder="Display name"></div> <div class="mb-4"><label class="block text-sm font-medium text-gray-700 mb-1" for="macro-description">Description (optional)</label> <textarea id="macro-description" class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" placeholder="Description of what this macro does" rows="2"></textarea></div> <div class="mb-4"><label class="block text-sm font-medium text-gray-700 mb-2">Commands</label> <!></div> <div class="flex justify-end gap-3 mt-6"><button class="bg-gray-300 text-gray-800 px-4 py-2 rounded hover:bg-gray-400">Cancel</button> <button class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 disabled:bg-gray-300"> </button></div></div>'),wi=$('<div class="bg-gray-100 rounded-lg p-8 text-center"><p class="text-gray-500">No macros defined yet.</p> <button class="mt-4 bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">Create Your First Macro</button></div>'),ki=$('<p class="text-sm text-gray-600 mt-1"> </p>'),$i=$('<div class="bg-white shadow rounded-lg overflow-hidden"><div class="p-4"><div class="flex justify-between items-start"><h3 class="text-lg font-medium"> </h3> <div class="flex space-x-2"><button class="text-blue-600 hover:text-blue-800" title="Edit"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"></path></svg></button> <button class="text-red-600 hover:text-red-800" title="Delete"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg></button></div></div> <!> <p class="text-xs text-gray-500 mt-2"> </p> <p class="text-xs text-gray-500 mt-1"> </p></div> <div class="bg-gray-50 px-4 py-3 border-t flex justify-between"><button class="flex-1 bg-green-500 text-white px-2 py-2 rounded-l hover:bg-green-600 flex justify-center items-center"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd"></path></svg> Execute</button> <button class="flex-1 bg-indigo-500 text-white px-2 py-2 rounded-r hover:bg-indigo-600 flex justify-center items-center ml-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" viewBox="0 0 20 20" fill="currentColor"><path d="M7 3a1 1 0 000 2h6a1 1 0 100-2H7zM4 7a1 1 0 011-1h10a1 1 0 110 2H5a1 1 0 01-1-1zM2 11a2 2 0 012-2h12a2 2 0 012 2v4a2 2 0 01-2 2H4a2 2 0 01-2-2v-4z"></path></svg> Assign</button></div></div>'),Ei=$('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"></div>'),Ci=$('<div class="flex justify-between mb-6"><div class="flex items-center"><div></div> <span class="text-sm text-gray-600"> </span></div> <button class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">Create Macro</button></div> <!>',1),Si=$('<button class="p-4 bg-gray-100 hover:bg-blue-100 border border-gray-300 rounded text-center"></button>'),Mi=$(`<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"><div class="bg-white rounded-lg p-6 max-w-md w-full"><h3 class="text-lg font-medium mb-4"> </h3> <p class="text-sm text-gray-600 mb-4">Select a button to assign this macro to. This will update the button's configuration.</p> <div class="grid grid-cols-3 gap-2 mb-4"></div> <div class="flex justify-end"><button class="bg-gray-300 text-gray-800 px-4 py-2 rounded hover:bg-gray-400">Cancel</button></div></div></div>`),Ai=$('<div class="macros-page p-4"><h2 class="text-2xl font-bold mb-4">Macros</h2> <!> <!> <!></div> <!>',1);function Ni(e,t){je(t,!1);let r=ne([]),a=ne(!0),n=ne(null),o=null,i=ne(!1),l=ne(!1),u=ne(!1),c=ne(!1),_=ne(null),v=ne(""),p=ne(""),k=ne(""),x=ne([]);const P=ye.subscribe(z=>{y(l,z.connected)});zt(async()=>{try{y(a,!0),y(r,await yt.fetchAll()),y(a,!1)}catch(z){y(n,z.message||"Failed to load macros"),y(a,!1)}return()=>{P()}});function B(z){o=z,y(v,z.id),y(p,z.name),y(k,z.description||""),y(x,[...z.commands||[]]),y(i,!0),y(u,!1)}function D(){o=null,y(v,""),y(p,""),y(k,""),y(x,[]),y(i,!0),y(u,!0)}function C(){y(i,!1),y(u,!1),o=null}async function m(z){try{await yt.executeMacro(z.id)}catch(O){y(n,O.message||"Failed to execute macro")}}async function b(z){if(confirm(`Are you sure you want to delete the macro "${z.name}"?`))try{await yt.deleteMacro(z.id),y(r,s(r).filter(O=>O.id!==z.id))}catch(O){y(n,O.message||"Failed to delete macro")}}async function w(){const z={id:s(v),name:s(p),description:s(k),commands:s(x)};try{if(s(u)){const O=await yt.createMacro(z);y(r,[...s(r),O])}else{const O=await yt.updateMacro(s(v),z);y(r,s(r).map(R=>R.id===s(v)?O:R))}y(i,!1),y(u,!1),o=null}catch(O){y(n,O.message||"Failed to save macro")}}function h(z){y(x,z.detail.commands)}function E(z){y(_,z),y(c,!0)}function S(){y(c,!1),y(_,null)}async function U(z){if(s(_))try{await ye.assignMacroToButton(s(_).id,z),await ye.requestAllConfigs(),S()}catch(O){y(n,O.message||"Failed to assign macro to button")}}et();var Z=Ai(),Y=q(Z),A=g(f(Y),2);{var W=z=>{var O=bi(),R=g(f(O)),V=g(R);K(()=>j(R,` ${s(n)??""} `)),J("click",V,()=>y(n,null)),d(z,O)};I(A,z=>{s(n)&&z(W)})}var X=g(A,2);{var ce=z=>{var O=hi(),R=g(f(O),2);J("click",R,()=>ye.connect()),d(z,O)};I(X,z=>{s(l)||z(ce)})}var se=g(X,2);{var M=z=>{var O=yi();d(z,O)},N=z=>{var O=F(),R=q(O);{var V=re=>{var ue=xi(),oe=f(ue),L=f(oe),H=g(oe,2),ve=g(f(H),2),ee=g(H,2),Q=g(f(ee),2),ae=g(ee,2),fe=g(f(ae),2),ie=g(ae,2),_e=g(f(ie),2);mi(_e,{get commands(){return s(x)},$$events:{update:h}});var le=g(ie,2),de=f(le),pe=g(de,2),xe=f(pe);K(()=>{j(L,s(u)?"Create New Macro":"Edit Macro"),ve.disabled=!s(u),pe.disabled=!s(v)||!s(p)||s(x).length===0,j(xe,s(u)?"Create":"Save")}),Mt(ve,()=>s(v),ze=>y(v,ze)),Mt(Q,()=>s(p),ze=>y(p,ze)),Mt(fe,()=>s(k),ze=>y(k,ze)),J("click",de,C),J("click",pe,w),d(re,ue)},te=re=>{var ue=Ci(),oe=q(ue),L=f(oe),H=f(L),ve=g(H,2),ee=f(ve),Q=g(L,2),ae=g(oe,2);{var fe=_e=>{var le=wi(),de=g(f(le),2);J("click",de,D),d(_e,le)},ie=_e=>{var le=Ei();Ne(le,5,()=>s(r),Ae,(de,pe)=>{var xe=$i(),ze=f(xe),we=f(ze),he=f(we),qe=f(he),nt=g(he,2),pt=f(nt),Ue=g(pt,2),ke=g(we,2);{var Oe=Et=>{var De=ki(),st=f(De);K(()=>j(st,s(pe).description)),d(Et,De)};I(ke,Et=>{s(pe).description&&Et(Oe)})}var _t=g(ke,2),at=f(_t),gt=g(_t,2),Te=f(gt),Ge=g(ze,2),$t=f(Ge),Pt=g($t,2);K(()=>{j(qe,s(pe).name),j(at,`ID: ${s(pe).id??""}`),j(Te,`${(s(pe).commands||[]).length??""} commands`),$t.disabled=!s(l),Pt.disabled=!s(l)}),J("click",pt,()=>B(s(pe))),J("click",Ue,()=>b(s(pe))),J("click",$t,()=>m(s(pe))),J("click",Pt,()=>E(s(pe))),d(de,xe)}),d(_e,le)};I(ae,_e=>{s(r).length===0?_e(fe):_e(ie,!1)})}K(()=>{He(H,`w-3 h-3 rounded-full mr-2 ${s(l)?"bg-green-500":"bg-red-500"}`),j(ee,`WebSocket: ${(s(l)?"Connected":"Disconnected")??""}`)}),J("click",Q,D),d(re,ue)};I(R,re=>{s(i)?re(V):re(te,!1)},!0)}d(z,O)};I(se,z=>{s(a)?z(M):z(N,!1)})}var T=g(Y,2);{var G=z=>{var O=Mi(),R=f(O),V=f(R),te=f(V),re=g(V,4);Ne(re,4,()=>Array(9),Ae,(L,H,ve)=>{var ee=Si();ee.textContent=`Button ${ve+1}`,J("click",ee,()=>U(`button-0-${ve}`)),d(L,ee)});var ue=g(re,2),oe=f(ue);K(()=>j(te,`Assign "${s(_).name??""}" to Button`)),J("click",oe,S),d(z,O)};I(T,z=>{s(c)&&z(G)})}d(e,Z),Ve()}var zi=$('<button class="ml-2 text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 transition-colors">Reconnect</button>'),Pi=$('<button class="ml-2 text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 transition-colors">Request Data</button>'),Ti=$('<span class="text-sm"><!> <!></span>'),Di=$('<button class="text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 transition-colors">Reconnect</button>'),Bi=$("<div><div></div> <!></div>");function Ii(e,t){je(t,!1);let r=Be(t,"showLabel",8,!0),a=Be(t,"position",8,"top-right"),n=ne(!1),o=ne(!1);const i=ye.subscribe(x=>{y(n,x.connected),y(o,x.connectionVerified)});Ms(i);function l(){ye.connect()}function u(){ye.subscribe(x=>x.connected).connected&&ye.requestAllConfigs().catch(x=>{console.error("Failed to request configurations:",x)})}et();var c=Bi(),_=f(c),v=g(_,2);{var p=x=>{var P=Ti(),B=f(P);{var D=h=>{var E=F(),S=q(E);{var U=Y=>{var A=Ke("Connected");d(Y,A)},Z=Y=>{var A=Ke("Connected (No Data)");d(Y,A)};I(S,Y=>{s(o)?Y(U):Y(Z,!1)})}d(h,E)},C=h=>{var E=Ke("Disconnected");d(h,E)};I(B,h=>{s(n)?h(D):h(C,!1)})}var m=g(B,2);{var b=h=>{var E=zi();J("click",E,l),d(h,E)},w=h=>{var E=F(),S=q(E);{var U=Z=>{var Y=Pi();J("click",Y,u),d(Z,Y)};I(S,Z=>{s(o)||Z(U)},!0)}d(h,E)};I(m,h=>{s(n)?h(w,!1):h(b)})}d(x,P)},k=x=>{var P=F(),B=q(P);{var D=C=>{var m=Di();J("click",m,l),d(C,m)};I(B,C=>{s(n)||C(D)},!0)}d(x,P)};I(v,x=>{r()?x(p):x(k,!1)})}K(()=>{He(c,`${`connection-status ${a()} flex items-center gap-2`??""} svelte-q06out`),He(_,`${`w-3 h-3 rounded-full ${s(n)?s(o)?"bg-green-500":"bg-yellow-500":"bg-red-500"}`??""} svelte-q06out`)}),d(e,c),Ve()}var qi=$('<div class="flex justify-center items-center p-8 svelte-1ps1vr7"><div class="loading-spinner svelte-1ps1vr7"></div> <p class="ml-2 svelte-1ps1vr7">Loading configuration data...</p></div> <button class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 mt-4 svelte-1ps1vr7">Load Sample Data (Demo)</button>',1),Oi=$('<div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded svelte-1ps1vr7"><p class="svelte-1ps1vr7"> </p> <button class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 mt-4 svelte-1ps1vr7">Load Sample Data (Demo)</button></div>'),Ri=$('<div class="flex flex-col items-center svelte-1ps1vr7"><button> </button> <button class="text-xs text-blue-500 mb-2 svelte-1ps1vr7" title="Refresh this config only">Refresh</button></div>'),Li=$('<pre class="json-display svelte-1ps1vr7"> </pre>'),Fi=$('<pre class="json-display svelte-1ps1vr7"> </pre>'),Wi=$('<pre class="json-display svelte-1ps1vr7"> </pre>'),ji=$('<pre class="json-display svelte-1ps1vr7"> </pre>'),Vi=$('<pre class="json-display svelte-1ps1vr7"> </pre>'),Ui=$('<pre class="json-display svelte-1ps1vr7"> </pre>'),Ki=$('<pre class="json-display svelte-1ps1vr7"> </pre>'),Hi=$('<p class="text-gray-500 italic svelte-1ps1vr7">No data available for this configuration type</p>'),Yi=$('<div class="flex border-b mb-4 flex-wrap svelte-1ps1vr7"></div> <div class="config-content-container svelte-1ps1vr7"><!></div>',1),Ji=$(`<div class="raw-config-container svelte-1ps1vr7"><div class="flex justify-between items-center mb-4 svelte-1ps1vr7"><h2 class="text-2xl font-bold svelte-1ps1vr7">Raw Configuration</h2> <button class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 flex items-center svelte-1ps1vr7"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1 svelte-1ps1vr7" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z" clip-rule="evenodd" class="svelte-1ps1vr7"></path></svg> Refresh</button></div> <div class="bg-white rounded-lg shadow p-4 mb-6 svelte-1ps1vr7"><p class="text-gray-600 mb-4 svelte-1ps1vr7">This page displays the raw JSON configuration files stored in the ESP32 memory.
      You can view different configuration files by selecting the tabs below.</p> <!></div></div>`);function Gi(e,t){je(t,!1);let r=ne({modules:null,macros:null,system:null,actions:null,components:null,info:null,leds:null}),a=ne("modules"),n=ne(!0),o=ne(null);function i(D){try{return JSON.stringify(D,null,2)}catch{return"Error formatting JSON"}}zt(async()=>{try{y(n,!0);const D=setTimeout(()=>{s(n)&&!s(r).modules&&!s(r).macros&&!s(r).system&&(console.log("No configuration data received, loading sample data"),l())},5e3);ye.subscribe(m=>m.connected).connected?ye.requestAllConfigs().catch(m=>{console.error("Error sending config request:",m)}):l();const C=ye.subscribe(m=>{if(m.events&&m.events.length>0){const b=m.events[m.events.length-1];b.type==="config_data"&&(b.configType==="modules"?Pe(r,s(r).modules=b.data):b.configType==="macros"?Pe(r,s(r).macros=b.data):b.configType==="system"?Pe(r,s(r).system=b.data):b.configType==="actions"?Pe(r,s(r).actions=b.data):b.configType==="components"?Pe(r,s(r).components=b.data):b.configType==="info"?Pe(r,s(r).info=b.data):b.configType==="leds"&&Pe(r,s(r).leds=b.data),y(n,!1),clearTimeout(D))}});return()=>{C(),clearTimeout(D)}}catch(D){console.error("Failed to load configurations:",D),y(o,D.message||"Failed to load configurations"),y(n,!1)}});function l(){y(r,{modules:[{id:"A1:B2:C3:D4:E5:F6",name:"Main Module",gridSize:{rows:5,columns:5},components:[{id:"display-1",type:"display",position:{row:0,column:0},keyBinding:null},{id:"btn-1",type:"button",position:{row:1,column:0},keyBinding:"macro:123"}]}],macros:[{id:"123",name:"Test Macro",commands:[{type:"keypress",key:"a"}]}],system:{version:"1.0.0",deviceName:"Modular Macropad",lastSync:new Date().toISOString()},actions:{keyPress:["a","b","c"],specialKeys:["F1","F2","Enter"]},components:{buttons:["btn-1","btn-2"],encoders:["encoder-1"],displays:["display-1"]},info:{manufacturer:"Modular Macropad",model:"DIY-1",firmware:"1.0.0"},leds:{brightness:100,patterns:["solid","rainbow","breathe"]}}),y(n,!1)}function u(){if(!ye.subscribe(D=>D.connected).connected){y(o,"WebSocket not connected. Cannot refresh data.");return}y(n,!0),y(o,null),ye.requestAllConfigs().catch(D=>{console.error("Error requesting configurations:",D),y(o,D.message||"Failed to request configurations"),y(n,!1)})}function c(D){if(!ye.subscribe(C=>C.connected).connected){y(o,"WebSocket not connected. Cannot refresh data.");return}ye.requestConfig(D).catch(C=>{console.error(`Error requesting ${D} configuration:`,C)})}et();var _=Ji(),v=f(_),p=g(f(v),2),k=g(v,2),x=g(f(k),2);{var P=D=>{var C=qi(),m=g(q(C),2);J("click",m,l),d(D,C)},B=D=>{var C=F(),m=q(C);{var b=h=>{var E=Oi(),S=f(E),U=f(S),Z=g(S,2);K(()=>j(U,s(o))),J("click",Z,l),d(h,E)},w=h=>{var E=Yi(),S=q(E);Ne(S,5,()=>Object.keys(s(r)),Ae,(W,X)=>{var ce=Ri(),se=f(ce),M=f(se),N=g(se,2);K(T=>{He(se,`${`px-4 py-2 mr-2 ${s(a)===s(X)?"border-b-2 border-blue-500 font-semibold":"text-gray-600"}`??""} svelte-1ps1vr7`),j(M,T)},[()=>s(X).charAt(0).toUpperCase()+s(X).slice(1)],Ce),J("click",se,()=>y(a,s(X))),J("click",N,()=>c(s(X))),d(W,ce)});var U=g(S,2),Z=f(U);{var Y=W=>{var X=Li(),ce=f(X);K(se=>j(ce,se),[()=>i(s(r).modules)],Ce),d(W,X)},A=W=>{var X=F(),ce=q(X);{var se=N=>{var T=Fi(),G=f(T);K(z=>j(G,z),[()=>i(s(r).macros)],Ce),d(N,T)},M=N=>{var T=F(),G=q(T);{var z=R=>{var V=Wi(),te=f(V);K(re=>j(te,re),[()=>i(s(r).system)],Ce),d(R,V)},O=R=>{var V=F(),te=q(V);{var re=oe=>{var L=ji(),H=f(L);K(ve=>j(H,ve),[()=>i(s(r).actions)],Ce),d(oe,L)},ue=oe=>{var L=F(),H=q(L);{var ve=Q=>{var ae=Vi(),fe=f(ae);K(ie=>j(fe,ie),[()=>i(s(r).components)],Ce),d(Q,ae)},ee=Q=>{var ae=F(),fe=q(ae);{var ie=le=>{var de=Ui(),pe=f(de);K(xe=>j(pe,xe),[()=>i(s(r).info)],Ce),d(le,de)},_e=le=>{var de=F(),pe=q(de);{var xe=we=>{var he=Ki(),qe=f(he);K(nt=>j(qe,nt),[()=>i(s(r).leds)],Ce),d(we,he)},ze=we=>{var he=Hi();d(we,he)};I(pe,we=>{s(a)==="leds"&&s(r).leds?we(xe):we(ze,!1)},!0)}d(le,de)};I(fe,le=>{s(a)==="info"&&s(r).info?le(ie):le(_e,!1)},!0)}d(Q,ae)};I(H,Q=>{s(a)==="components"&&s(r).components?Q(ve):Q(ee,!1)},!0)}d(oe,L)};I(te,oe=>{s(a)==="actions"&&s(r).actions?oe(re):oe(ue,!1)},!0)}d(R,V)};I(G,R=>{s(a)==="system"&&s(r).system?R(z):R(O,!1)},!0)}d(N,T)};I(ce,N=>{s(a)==="macros"&&s(r).macros?N(se):N(M,!1)},!0)}d(W,X)};I(Z,W=>{s(a)==="modules"&&s(r).modules?W(Y):W(A,!1)})}d(h,E)};I(m,h=>{s(o)?h(b):h(w,!1)},!0)}d(D,C)};I(x,D=>{s(n)?D(P):D(B,!1)})}K(()=>p.disabled=s(n)),J("click",p,u),d(e,_),Ve()}var Zi=$('<main class="min-h-screen flex flex-col bg-gray-50"><!> <div class="navbar mb-2 p-2 bg-primary text-primary-content rounded-lg shadow"><div class="flex-1"><h1 class="text-xl font-bold ml-2">Macropad Control Panel</h1></div> <div class="flex-none"><div class="tabs tabs-boxed bg-primary-focus"><button data-tab="macropad"><!> Macropad</button> <button data-tab="macros"><!> Macros</button> <button data-tab="lighting"><!> Lighting</button> <button data-tab="settings"><!> Settings</button> <button data-tab="raw-config"><!> Raw Config</button></div></div></div> <div class="main-content mb-8"><!></div></main>');function Xi(e,t){je(t,!1);let r=ne("macropad");zt(()=>{ye.connect()}),et();var a=Zi(),n=f(a);Ii(n,{position:"top-right"});var o=g(n,2),i=g(f(o),2),l=f(i),u=f(l),c=f(u);Rs(c,{class:"inline-block w-5 h-5 mr-1"});var _=g(u,2),v=f(_);Ls(v,{class:"inline-block w-5 h-5 mr-1"});var p=g(_,2),k=f(p);qs(k,{class:"inline-block w-5 h-5 mr-1"});var x=g(p,2),P=f(x);js(P,{class:"inline-block w-5 h-5 mr-1"});var B=g(x,2),D=f(B);Os(D,{class:"inline-block w-5 h-5 mr-1"});var C=g(o,2),m=f(C);{var b=h=>{Zo(h,{})},w=h=>{var E=F(),S=q(E);{var U=Y=>{Ni(Y,{})},Z=Y=>{var A=F(),W=q(A);{var X=se=>{Qo(se)},ce=se=>{var M=F(),N=q(M);{var T=z=>{},G=z=>{var O=F(),R=q(O);{var V=te=>{Gi(te,{})};I(R,te=>{s(r)==="raw-config"&&te(V)},!0)}d(z,O)};I(N,z=>{s(r)==="settings"?z(T):z(G,!1)},!0)}d(se,M)};I(W,se=>{s(r)==="lighting"?se(X):se(ce,!1)},!0)}d(Y,A)};I(S,Y=>{s(r)==="macros"?Y(U):Y(Z,!1)},!0)}d(h,E)};I(m,h=>{s(r)==="macropad"?h(b):h(w,!1)})}K(()=>{He(u,`tab transition-colors duration-200 ${s(r)==="macropad"?"tab-active bg-primary-content text-primary":"text-primary-content"}`),He(_,`tab transition-colors duration-200 ${s(r)==="macros"?"tab-active bg-primary-content text-primary":"text-primary-content"}`),He(p,`tab transition-colors duration-200 ${s(r)==="lighting"?"tab-active bg-primary-content text-primary":"text-primary-content"}`),He(x,`tab transition-colors duration-200 ${s(r)==="settings"?"tab-active bg-primary-content text-primary":"text-primary-content"}`),He(B,`tab transition-colors duration-200 ${s(r)==="raw-config"?"tab-active bg-primary-content text-primary":"text-primary-content"}`)}),J("click",u,()=>y(r,"macropad")),J("click",_,()=>y(r,"macros")),J("click",p,()=>y(r,"lighting")),J("click",x,()=>y(r,"settings")),J("click",B,()=>y(r,"raw-config")),d(e,a),Ve()}cs(Xi,{target:document.getElementById("app")});
